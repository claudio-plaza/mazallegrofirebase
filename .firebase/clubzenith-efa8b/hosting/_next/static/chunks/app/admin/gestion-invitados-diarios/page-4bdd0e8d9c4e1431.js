(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{88088:function(e,a,r){Promise.resolve().then(r.bind(r,1401))},1401:function(e,a,r){"use strict";r.d(a,{AdminInvitadosDiariosDashboard:function(){return R}});var s=r(57437),t=r(2265),n=r(89733),o=r(48185),i=r(86763),l=r(46997),d=r(87564),c=r(44867),m=r(5025),f=r(56935),u=r(5891),x=r(38133),g=r(87385),h=r(37164),p=r(54817),v=r(92033),N=r(97e3),j=r(54184),b=r(82477),y=r(80624),w=r(80023),C=r(47304),D=r(79055),I=r(70402),P=r(77209),T=r(29973),M=r(26912);function R(){let[e,a]=(0,t.useState)([]),[r,R]=(0,t.useState)(new Date),[S,Z]=(0,t.useState)(!0),{toast:E}=(0,i.pm)();(0,t.useEffect)(()=>{let e=async()=>{Z(!0);try{let e=await (0,M.$M)();a(e)}catch(e){E({title:"Error",description:"No se pudieron cargar las listas de invitados.",variant:"destructive"}),console.error("Error fetching daily guest lists:",e)}finally{Z(!1)}};e();let r=()=>e();return window.addEventListener("firestore/solicitudesInvitadosDiariosUpdated",r),()=>{window.removeEventListener("firestore/solicitudesInvitadosDiariosUpdated",r)}},[E]);let k=(0,t.useMemo)(()=>{if(!r)return[];let a=(0,N.WU)(r,"yyyy-MM-dd");return e.filter(e=>e.fecha===a)},[r,e]),L=(0,t.useMemo)(()=>{let e={sociosConListas:k.length,invitadosTotales:0,invitadosIngresaronTotal:0,ingresaronCumpleanos:0,ingresaronPagaronEfectivo:0,ingresaronPagaronTransferencia:0,ingresaronPagaronCaja:0,ingresaronMenoresGratis:0};return k.forEach(a=>{e.invitadosTotales+=a.listaInvitadosDiarios.length,a.listaInvitadosDiarios.forEach(a=>{if(a.ingresado){e.invitadosIngresaronTotal++;let r=-1;if(a.fechaNacimiento&&(0,j.J)(new Date(a.fechaNacimiento))&&(r=(0,b.o)(new Date,new Date(a.fechaNacimiento))),a.esDeCumpleanos)e.ingresaronCumpleanos++;else if(-1!==r&&r<3)e.ingresaronMenoresGratis++;else switch(a.metodoPago){case"Efectivo":e.ingresaronPagaronEfectivo++;break;case"Transferencia":e.ingresaronPagaronTransferencia++;break;case"Caja":e.ingresaronPagaronCaja++}}})}),e},[k]),_=e=>{if(!e.ingresado)return(0,s.jsx)(D.C,{variant:"outline",className:"text-xs",children:"Pendiente de Ingreso"});let a=-1;if(e.fechaNacimiento&&(0,j.J)(new Date(e.fechaNacimiento))&&(a=(0,b.o)(new Date,new Date(e.fechaNacimiento))),e.esDeCumpleanos)return(0,s.jsxs)(D.C,{variant:"secondary",className:"text-xs bg-pink-500 hover:bg-pink-600 text-white",children:[(0,s.jsx)(l.Z,{className:"mr-1 h-3 w-3"})," De Cumplea\xf1os"]});if(-1!==a&&a<3)return(0,s.jsxs)(D.C,{variant:"secondary",className:"text-xs bg-purple-500 hover:bg-purple-600 text-white",children:[(0,s.jsx)(d.Z,{className:"mr-1 h-3 w-3"})," Menor (Gratuito)"]});if(e.metodoPago){let a=(0,s.jsx)(c.Z,{className:"mr-1 h-3 w-3"}),r="bg-gray-500 hover:bg-gray-600";return"Efectivo"===e.metodoPago&&(a=(0,s.jsx)(m.Z,{className:"mr-1 h-3 w-3"}),r="bg-green-500 hover:bg-green-600"),"Transferencia"===e.metodoPago&&(a=(0,s.jsx)(f.Z,{className:"mr-1 h-3 w-3"}),r="bg-blue-500 hover:bg-blue-600"),"Caja"===e.metodoPago&&(a=(0,s.jsx)(u.Z,{className:"mr-1 h-3 w-3"}),r="bg-orange-500 hover:bg-orange-600"),(0,s.jsxs)(D.C,{variant:"default",className:"text-xs ".concat(r," text-white"),children:[a," Pag\xf3: ",e.metodoPago]})}return(0,s.jsx)(D.C,{variant:"default",className:"text-xs bg-green-500 hover:bg-green-600 text-white",children:"Ingres\xf3 (Pago no especificado)"})};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center",children:[(0,s.jsx)(x.Z,{className:"mr-3 h-8 w-8 text-primary"})," Gesti\xf3n de Invitados Diarios"]}),(0,s.jsxs)(o.Zb,{className:"shadow-xl",children:[(0,s.jsxs)(o.Ol,{children:[(0,s.jsx)(o.ll,{children:"Listas de Invitados Diarios por Fecha"}),(0,s.jsx)(o.SZ,{children:"Selecciona una fecha para ver y descargar la lista de invitados diarios registrados por los socios."})]}),(0,s.jsxs)(o.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)(I._,{htmlFor:"date-picker-invitados-diarios",children:"Seleccionar Fecha:"}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsx)(g.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(0,s.jsx)(P.I,{id:"date-picker-invitados-diarios",type:"date",value:r?(0,N.WU)(r,"yyyy-MM-dd"):"",onChange:e=>R(e.target.value?(0,y.D)(e.target.value):void 0),className:"w-full sm:w-[280px] pl-10"})]})]}),(0,s.jsxs)(n.z,{onClick:()=>{if(0===k.length){E({title:"Lista de Invitados Diarios Vac\xeda",description:"No hay invitados registrados para el ".concat(r?(0,v.p6)(r,"dd/MM/yyyy"):"d\xeda seleccionado","."),variant:"default"});return}let e="Reporte de Invitados Diarios - Fecha: ".concat(r?(0,v.p6)(r,"dd/MM/yyyy"):"N/A","\n\n");e+="Resumen del D\xeda:\n"+"- Socios con Listas: ".concat(L.sociosConListas,"\n")+"- Invitados Totales Registrados: ".concat(L.invitadosTotales,"\n")+"- Invitados que Ingresaron (Total): ".concat(L.invitadosIngresaronTotal,"\n")+"  - De Cumplea\xf1os: ".concat(L.ingresaronCumpleanos,"\n")+"  - Pagaron Efectivo: ".concat(L.ingresaronPagaronEfectivo,"\n")+"  - Pagaron Transferencia: ".concat(L.ingresaronPagaronTransferencia,"\n")+"  - Pagaron Caja: ".concat(L.ingresaronPagaronCaja,"\n")+"  - Menores (Gratis): ".concat(L.ingresaronMenoresGratis,"\n\n")+"Detalle por Socio:\n",k.forEach(a=>{e+="\nSocio: ".concat(a.nombreSocioTitular," (N\xb0: ").concat(a.idSocioTitular,")\n")+"Invitados:\n",a.listaInvitadosDiarios.length>0?a.listaInvitadosDiarios.forEach(a=>{let r="Pendiente de Ingreso";if(a.ingresado){if(r="Ingres\xf3",a.esDeCumpleanos)r+=" (Cumplea\xf1os)";else{let e=-1;a.fechaNacimiento&&(0,j.J)(new Date(a.fechaNacimiento))&&(e=(0,b.o)(new Date,new Date(a.fechaNacimiento))),-1!==e&&e<3?r+=" (Menor - Gratuito)":a.metodoPago?r+=" (Pag\xf3: ".concat(a.metodoPago,")"):r+=" (Regular - Pago Pendiente/No especificado)"}}e+="- ".concat(a.nombre," ").concat(a.apellido," (DNI: ").concat(a.dni,") - ").concat(r,"\n")}):e+="- Sin invitados en esta lista.\n"}),console.log("Contenido del reporte para PDF:\n",e),E({title:"Descarga de Invitados (Simulada)",description:"El contenido del reporte para el ".concat(r?(0,v.p6)(r,"dd/MM/yyyy"):""," se ha mostrado en la consola. La descarga directa de PDF requiere una biblioteca adicional."),duration:7e3})},disabled:S||!r||0===k.length,className:"w-full sm:w-auto mt-2 sm:mt-0 self-end sm:self-center",children:[(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),S?"Cargando...":"Descargar Lista de Invitados (PDF)"]})]}),S&&(0,s.jsx)("p",{className:"text-center py-4",children:"Cargando listas de invitados..."}),!S&&!r&&(0,s.jsxs)("div",{className:"text-center py-10 px-6 border border-dashed rounded-md mt-6",children:[(0,s.jsx)(p.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-xl font-medium text-foreground",children:"Seleccione una fecha"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Por favor, elija una fecha para ver los invitados."})]}),!S&&r&&0===k.length&&(0,s.jsxs)("div",{className:"text-center py-10 px-6 border border-dashed rounded-md mt-6",children:[(0,s.jsx)(x.Z,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-xl font-medium text-foreground",children:"No hay invitados registrados"}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-1",children:["No se encontraron listas de invitados para el d\xeda ",(0,v.p6)(r,"dd/MM/yyyy"),"."]})]}),!S&&r&&k.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.Zb,{className:"mt-6 bg-muted/30",children:[(0,s.jsx)(o.Ol,{className:"pb-3",children:(0,s.jsxs)(o.ll,{className:"text-lg",children:["Resumen del D\xeda: ",(0,v.p6)(r,"dd 'de' MMMM")]})}),(0,s.jsxs)(o.aY,{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Socios con Listas:"})," ",L.sociosConListas]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Invitados Totales:"})," ",L.invitadosTotales]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Ingresaron (Total):"})," ",L.invitadosIngresaronTotal]}),(0,s.jsx)(T.Z,{className:"col-span-full my-1"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.Z,{className:"mr-1.5 h-4 w-4 text-pink-500"}),(0,s.jsx)("strong",{children:"Ingr. Cumplea\xf1os:"})," ",L.ingresaronCumpleanos]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m.Z,{className:"mr-1.5 h-4 w-4 text-green-500"}),(0,s.jsx)("strong",{children:"Pagaron Efectivo:"})," ",L.ingresaronPagaronEfectivo]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(f.Z,{className:"mr-1.5 h-4 w-4 text-blue-500"}),(0,s.jsx)("strong",{children:"Pagaron Transfer.:"})," ",L.ingresaronPagaronTransferencia]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"mr-1.5 h-4 w-4 text-orange-500"}),(0,s.jsx)("strong",{children:"Pagaron Caja:"})," ",L.ingresaronPagaronCaja]}),(0,s.jsxs)("div",{className:"flex items-center col-span-full sm:col-span-1",children:[(0,s.jsx)(d.Z,{className:"mr-1.5 h-4 w-4 text-purple-500"}),(0,s.jsx)("strong",{children:"Ingr. Menores (Gratis):"})," ",L.ingresaronMenoresGratis]})]})]}),(0,s.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Detalle de Invitados para el ",(0,v.p6)(r,"dd 'de' MMMM 'de' yyyy")]}),(0,s.jsx)(w.x,{className:"h-[500px] w-full border rounded-md",children:(0,s.jsxs)(C.iA,{children:[(0,s.jsx)(C.xD,{children:(0,s.jsxs)(C.SC,{children:[(0,s.jsx)(C.ss,{className:"w-[30%]",children:"Socio Titular (N\xb0 Socio)"}),(0,s.jsx)(C.ss,{children:"Invitados"})]})}),(0,s.jsx)(C.RM,{children:k.map(e=>(0,s.jsxs)(C.SC,{children:[(0,s.jsxs)(C.pj,{className:"font-medium align-top",children:[e.nombreSocioTitular,(0,s.jsxs)("span",{className:"block text-xs text-muted-foreground",children:["(",e.idSocioTitular,")"]})]}),(0,s.jsx)(C.pj,{children:e.listaInvitadosDiarios.length>0?(0,s.jsx)("ul",{className:"space-y-1.5",children:e.listaInvitadosDiarios.map(e=>(0,s.jsx)("li",{className:"text-xs border-b border-dashed pb-1 last:border-b-0 last:pb-0",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{children:[e.nombre," ",e.apellido," (DNI: ",e.dni,")"]}),_(e)]})},e.dni))}):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Sin invitados en esta lista."})})]},e.id))})]})})]})]})]})]})]})}},79055:function(e,a,r){"use strict";r.d(a,{C:function(){return i}});var s=r(57437);r(2265);var t=r(13027),n=r(49354);let o=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:r,...t}=e;return(0,s.jsx)("div",{className:(0,n.cn)(o({variant:r}),a),...t})}},48185:function(e,a,r){"use strict";r.d(a,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},eW:function(){return m},ll:function(){return l}});var s=r(57437),t=r(2265),n=r(49354);let o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t})});o.displayName="Card";let i=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...t})});i.displayName="CardHeader";let l=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});l.displayName="CardTitle";let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",r),...t})});d.displayName="CardDescription";let c=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",r),...t})});c.displayName="CardContent";let m=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",r),...t})});m.displayName="CardFooter"},77209:function(e,a,r){"use strict";r.d(a,{I:function(){return o}});var s=r(57437),t=r(2265),n=r(49354);let o=t.forwardRef((e,a)=>{let{className:r,type:t,value:o,...i}=e;return(0,s.jsx)("input",{type:t,value:null==o?"":o,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...i})});o.displayName="Input"},70402:function(e,a,r){"use strict";r.d(a,{_:function(){return d}});var s=r(57437),t=r(2265),n=r(38364),o=r(13027),i=r(49354);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(n.f,{ref:a,className:(0,i.cn)(l(),r),...t})});d.displayName=n.f.displayName},80023:function(e,a,r){"use strict";r.d(a,{x:function(){return i}});var s=r(57437),t=r(2265),n=r(26770),o=r(49354);let i=t.forwardRef((e,a)=>{let{className:r,children:t,...i}=e;return(0,s.jsxs)(n.fC,{ref:a,className:(0,o.cn)("relative overflow-hidden",r),...i,children:[(0,s.jsx)(n.l_,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(l,{}),(0,s.jsx)(n.Ns,{})]})});i.displayName=n.fC.displayName;let l=t.forwardRef((e,a)=>{let{className:r,orientation:t="vertical",...i}=e;return(0,s.jsx)(n.gb,{ref:a,orientation:t,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...i,children:(0,s.jsx)(n.q4,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=n.gb.displayName},29973:function(e,a,r){"use strict";r.d(a,{Z:function(){return i}});var s=r(57437),t=r(2265),n=r(48484),o=r(49354);let i=t.forwardRef((e,a)=>{let{className:r,orientation:t="horizontal",decorative:i=!0,...l}=e;return(0,s.jsx)(n.f,{ref:a,decorative:i,orientation:t,className:(0,o.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",r),...l})});i.displayName=n.f.displayName},47304:function(e,a,r){"use strict";r.d(a,{RM:function(){return l},SC:function(){return d},iA:function(){return o},pj:function(){return m},ss:function(){return c},xD:function(){return i}});var s=r(57437),t=r(2265),n=r(49354);let o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,n.cn)("w-full caption-bottom text-sm",r),...t})})});o.displayName="Table";let i=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("thead",{ref:a,className:(0,n.cn)("[&_tr]:border-b",r),...t})});i.displayName="TableHeader";let l=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...t})});l.displayName="TableBody",t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...t})}).displayName="TableFooter";let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("tr",{ref:a,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...t})});d.displayName="TableRow";let c=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("th",{ref:a,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...t})});c.displayName="TableHead";let m=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("td",{ref:a,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...t})});m.displayName="TableCell",t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("caption",{ref:a,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...t})}).displayName="TableCaption"}},function(e){e.O(0,[4358,139,4868,317,73,985,6068,2971,7023,1744],function(){return e(e.s=88088)}),_N_E=e.O()}]);