(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2856],{97256:function(e,i,o){Promise.resolve().then(o.bind(o,84280))},84280:function(e,i,o){"use strict";o.d(i,{PanelMedicoDashboard:function(){return es}});var t=o(57437),a=o(2265),r=o(48185),s=o(47304),n=o(79055),l=o(89733),c=o(77209),d=o(80420),u=o(31014),m=o(39343),f=o(59772),p=o(54662),x=o(93363),h=o(4919),v=o(80112),N=o(86763),b=o(92033),g=o(97e3),j=o(45132),y=o(54184),w=o(82477),C=o(3756),A=o(80624),I=o(72781),S=o(13231),R=o(87385),M=o(54817),D=o(71145),Z=o(52022),F=o(36127),E=o(22468),V=o(74697),k=o(67048),P=o(70402),G=o(1663),T=o(87992),z=o(26912);let q=f.Ry({fechaRevision:f.hT({required_error:"La fecha de revisi\xf3n es obligatoria."}),resultado:f.Km(["Apto","No Apto"],{required_error:"El resultado es obligatorio."}),observaciones:f.Z_().optional()});function O(e){let{onRevisionGuardada:i,open:o,onOpenChange:s,personaPreseleccionada:n,bloquearBusqueda:d=!1}=e,[f,O]=(0,a.useState)(!1),_=void 0!==o?o:f,J=void 0!==s?s:O,[L,B]=(0,a.useState)(""),[H,U]=(0,a.useState)(null),[X,Y]=(0,a.useState)(""),{toast:K}=(0,N.pm)(),{userName:Q}=(0,k.a)(),[W,$]=(0,a.useState)(!1),[ee,ei]=(0,a.useState)("");(0,a.useEffect)(()=>{ei((0,g.WU)((0,j.e)(new Date,5),"yyyy-MM-dd"))},[]);let eo=(0,m.cI)({resolver:(0,u.F)(q),defaultValues:{fechaRevision:new Date,resultado:void 0,observaciones:""}});(0,a.useEffect)(()=>{(null==H?void 0:H.fechaNacimiento)&&(0,y.J)(H.fechaNacimiento)?$(3>(0,w.o)(new Date,H.fechaNacimiento)):$(!1)},[H]),(0,a.useEffect)(()=>{_&&(n?(U(n),B("".concat(n.nombreCompleto," (DNI: ").concat(n.id,")")),Y(""),eo.reset({fechaRevision:new Date,resultado:void 0,observaciones:""})):(eo.reset({fechaRevision:new Date,resultado:void 0,observaciones:""}),U(null),B(""),Y(""),$(!1)))},[_,n,eo]);let et=async()=>{if(!L.trim()){Y("Ingrese N\xb0 Socio, DNI, Nombre o Apellido."),U(null);return}let e=null,i=(0,b.bG)(L),o=await (0,z.g1)(L);if(o&&((0,b.bG)(o.numeroSocio)===i||(0,b.bG)(o.dni)===i||(0,b.bG)("".concat(o.nombre," ").concat(o.apellido)).includes(i))&&(e={id:o.numeroSocio,nombreCompleto:"".concat(o.nombre," ").concat(o.apellido),fechaNacimiento:o.fechaNacimiento,tipo:"Socio Titular",aptoMedicoActual:o.aptoMedico}),!e)for(let o of(await (0,z.hb)())){var t,a;let r=null===(t=o.grupoFamiliar)||void 0===t?void 0:t.find(e=>(0,b.bG)(e.dni)===i||(0,b.bG)("".concat(e.nombre," ").concat(e.apellido)).includes(i));if(r){e={id:r.dni,nombreCompleto:"".concat(r.nombre," ").concat(r.apellido),fechaNacimiento:r.fechaNacimiento,tipo:"Familiar",socioTitularId:o.numeroSocio,aptoMedicoActual:r.aptoMedico};break}let s=null===(a=o.adherentes)||void 0===a?void 0:a.find(e=>(0,b.bG)(e.dni)===i||(0,b.bG)("".concat(e.nombre," ").concat(e.apellido)).includes(i));if(s){e={id:s.dni,nombreCompleto:"".concat(s.nombre," ").concat(s.apellido),fechaNacimiento:s.fechaNacimiento,tipo:"Adherente",socioTitularId:o.numeroSocio,aptoMedicoActual:s.aptoMedico};break}}if(!e)for(let o of(await (0,z.$M)()).filter(e=>e.fecha===(0,C.c)(new Date,{representation:"date"}))){let t=o.listaInvitadosDiarios.find(e=>(0,b.bG)(e.dni)===i||(0,b.bG)("".concat(e.nombre," ").concat(e.apellido)).includes(i));if(t){e={id:t.dni,nombreCompleto:"".concat(t.nombre," ").concat(t.apellido),fechaNacimiento:t.fechaNacimiento||new Date(0),tipo:"Invitado Diario",socioTitularId:o.idSocioTitular,aptoMedicoActual:t.aptoMedico||void 0,fechaVisitaInvitado:(0,A.D)(o.fecha)};break}}e?(U(e),Y(""),eo.reset({fechaRevision:new Date,resultado:void 0,observaciones:""})):(U(null),Y("Persona no encontrada (Socio, Familiar, Adherente o Invitado Diario de hoy)."))},ea=async e=>{if(!H){K({title:"Error",description:"Debe seleccionar una persona.",variant:"destructive"});return}if(W){K({title:"Acci\xf3n no permitida",description:"No se puede registrar revisi\xf3n m\xe9dica para menores de 3 a\xf1os.",variant:"destructive"});return}let o=e.fechaRevision,t="Apto"===e.resultado,a={valido:t,fechaEmision:o,observaciones:e.observaciones};t?a.fechaVencimiento=(0,I.E)(o,14):a.razonInvalidez="No Apto seg\xfan revisi\xf3n m\xe9dica.";let r={fechaRevision:o,socioId:H.id,socioNombre:H.nombreCompleto,tipoPersona:H.tipo,resultado:e.resultado,observaciones:e.observaciones,medicoResponsable:Q||"M\xe9dico ".concat(G.J.name)};t&&a.fechaVencimiento&&(r.fechaVencimientoApto=a.fechaVencimiento),H.socioTitularId&&(r.idSocioAnfitrion=H.socioTitularId);try{switch(await (0,z.C8)(r),H.tipo){case"Socio Titular":{let e=await (0,z.g1)(H.id);e&&(e.aptoMedico=a,e.ultimaRevisionMedica=o,await (0,z.uL)(e));break}case"Familiar":{if(!H.socioTitularId)throw Error("ID de socio titular no encontrado para familiar.");let e=await (0,z.g1)(H.socioTitularId);if(e&&e.grupoFamiliar){let i=e.grupoFamiliar.findIndex(e=>e.dni===H.id);-1!==i&&(e.grupoFamiliar[i].aptoMedico=a,await (0,z.uL)(e))}break}case"Adherente":{if(!H.socioTitularId)throw Error("ID de socio titular no encontrado para adherente.");let e=await (0,z.g1)(H.socioTitularId);if(e&&e.adherentes){let i=e.adherentes.findIndex(e=>e.dni===H.id);-1!==i&&(e.adherentes[i].aptoMedico=a,await (0,z.uL)(e))}break}case"Invitado Diario":{if(!H.socioTitularId||!H.fechaVisitaInvitado)throw Error("Faltan datos para actualizar invitado.");let e=(0,C.c)(H.fechaVisitaInvitado,{representation:"date"}),i=await (0,z.yk)(H.socioTitularId,e);if(i){let e=i.listaInvitadosDiarios.findIndex(e=>e.dni===H.id);-1!==e&&(i.listaInvitadosDiarios[e].aptoMedico=a,await (0,z.Tg)(i))}}}K({title:"Revisi\xf3n Guardada y Estado Actualizado",description:"El estado de apto m\xe9dico para ".concat(H.nombreCompleto," ha sido actualizado.")}),i(),eo.reset({fechaRevision:new Date,resultado:void 0,observaciones:""}),U(null),B(""),J(!1)}catch(e){console.error("Error guardando revisi\xf3n o actualizando socio/invitado:",e),K({title:"Error",description:"No se pudo guardar la revisi\xf3n o actualizar los datos de la persona.",variant:"destructive"})}},er=H?(0,b.b9)(H.aptoMedicoActual,H.fechaNacimiento):null;return(0,t.jsxs)(p.Vq,{open:_,onOpenChange:J,children:[!n&&(0,t.jsx)(p.hg,{asChild:!0,children:(0,t.jsxs)(l.z,{children:[(0,t.jsx)(S.Z,{className:"mr-2 h-4 w-4"})," Nueva Revisi\xf3n"]})}),(0,t.jsxs)(p.cZ,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(p.fK,{children:[(0,t.jsxs)(p.$N,{className:"flex items-center text-xl",children:[(0,t.jsx)(R.Z,{className:"mr-2 h-6 w-6 text-primary"}),"Registrar Nueva Revisi\xf3n M\xe9dica"]}),(0,t.jsx)(p.Be,{className:"text-sm text-muted-foreground pt-1",children:"Busca un socio, familiar, adherente o invitado diario (de hoy) y registra el resultado. El apto f\xedsico ser\xe1 v\xe1lido por 15 d\xedas. Menores de 3 a\xf1os no requieren revisi\xf3n."})]}),(0,t.jsxs)("div",{className:"space-y-4 pt-4 pb-2",children:[!d&&(0,t.jsxs)("div",{children:[(0,t.jsx)(P._,{htmlFor:"searchSocio",className:"text-sm font-medium",children:"Buscar Persona (N\xb0 Socio, DNI, Nombre o Apellido)"}),(0,t.jsxs)("div",{className:"flex gap-2 items-center mt-1",children:[(0,t.jsx)(c.I,{id:"searchSocio",value:L,onChange:e=>B(e.target.value),placeholder:"Ej: S00123, 30123456 o Juan P\xe9rez",className:"flex-grow"}),(0,t.jsx)(l.z,{onClick:et,type:"button",variant:"outline",size:"icon",className:"shrink-0",children:(0,t.jsx)(M.Z,{className:"h-4 w-4"})})]})]}),X&&!d&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:X}),H&&(0,t.jsxs)(r.Zb,{className:"p-3 bg-muted/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:["Invitado Diario"===H.tipo?(0,t.jsx)(D.Z,{className:"h-4 w-4 text-primary"}):(0,t.jsx)(Z.Z,{className:"h-4 w-4 text-primary"}),(0,t.jsxs)("h4",{className:"font-semibold text-sm",children:[H.nombreCompleto," (",H.tipo,")"]})]}),"Invitado Diario"===H.tipo&&H.socioTitularId&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Anfitri\xf3n (Socio N\xb0): ",H.socioTitularId]}),er&&(0,t.jsxs)("p",{className:"text-xs ".concat(er.colorClass.replace("bg-","text-").replace("-100","-500")),children:["Apto actual: ",er.status," - ",er.message]})]})]}),W&&H&&(0,t.jsxs)(T.bZ,{variant:"default",className:"bg-blue-500/10 border-blue-500/30 text-blue-700",children:[(0,t.jsx)(F.Z,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)(T.Cd,{children:"Menor de 3 A\xf1os"}),(0,t.jsxs)(T.X,{children:[H.nombreCompleto," es menor de 3 a\xf1os. No se requiere ni se puede registrar una revisi\xf3n m\xe9dica."]})]}),(0,t.jsx)(x.l0,{...eo,children:(0,t.jsxs)("form",{onSubmit:eo.handleSubmit(ea),className:"space-y-6",children:[(0,t.jsxs)("fieldset",{disabled:W||!H,children:[(0,t.jsx)(x.Wi,{control:eo.control,name:"fechaRevision",render:e=>{let{field:i}=e;return(0,t.jsxs)(x.xJ,{children:[(0,t.jsx)(x.lX,{className:"text-sm font-medium",children:"Fecha de Revisi\xf3n"}),(0,t.jsx)(x.NI,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(R.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(0,t.jsx)(c.I,{type:"date",value:i.value?(0,g.WU)(new Date(i.value),"yyyy-MM-dd"):"",onChange:e=>i.onChange(e.target.value?(0,A.D)(e.target.value):null),min:ee,className:"w-full pl-10",disabled:!ee})]})}),(0,t.jsx)(x.zG,{})]})}}),(0,t.jsx)(x.Wi,{control:eo.control,name:"resultado",render:e=>{let{field:i}=e;return(0,t.jsxs)(x.xJ,{className:"space-y-2",children:[(0,t.jsx)(x.lX,{className:"text-sm font-medium",children:"Resultado de la Revisi\xf3n"}),(0,t.jsx)(x.NI,{children:(0,t.jsxs)(v.E,{onValueChange:i.onChange,defaultValue:i.value,className:"flex space-x-4",children:[(0,t.jsxs)(x.xJ,{className:"flex items-center space-x-2 space-y-0",children:[(0,t.jsx)(x.NI,{children:(0,t.jsx)(v.m,{value:"Apto",id:"apto"})}),(0,t.jsxs)(P._,{htmlFor:"apto",className:"font-normal flex items-center cursor-pointer",children:[(0,t.jsx)(E.Z,{className:"mr-1 h-4 w-4 text-green-600"}),"Apto"]})]}),(0,t.jsxs)(x.xJ,{className:"flex items-center space-x-2 space-y-0",children:[(0,t.jsx)(x.NI,{children:(0,t.jsx)(v.m,{value:"No Apto",id:"no-apto"})}),(0,t.jsxs)(P._,{htmlFor:"no-apto",className:"font-normal flex items-center cursor-pointer",children:[(0,t.jsx)(V.Z,{className:"mr-1 h-4 w-4 text-red-600"}),"No Apto"]})]})]})}),(0,t.jsx)(x.zG,{})]})}}),(0,t.jsx)(x.Wi,{control:eo.control,name:"observaciones",render:e=>{let{field:i}=e;return(0,t.jsxs)(x.xJ,{children:[(0,t.jsx)(x.lX,{className:"text-sm font-medium",children:"Observaciones"}),(0,t.jsx)(x.NI,{children:(0,t.jsx)(h.g,{placeholder:"A\xf1ade notas sobre la revisi\xf3n (ej: reposo deportivo por 7 d\xedas, apto con preexistencia X, etc.)",...i,className:"min-h-[100px]"})}),(0,t.jsx)(x.zG,{})]})}})]}),(0,t.jsxs)(p.cN,{className:"pt-2",children:[(0,t.jsx)(p.GG,{asChild:!0,children:(0,t.jsx)(l.z,{type:"button",variant:"ghost",children:"Cancelar"})}),(0,t.jsx)(l.z,{type:"submit",disabled:!H||eo.formState.isSubmitting||W,children:eo.formState.isSubmitting?"Guardando...":"Guardar Revisi\xf3n"})]})]})})]})]})}var _=o(5072),J=o(33831),L=o(49105),B=o(94207),H=o(43193),U=o(33855),X=o(82244),Y=o(36141),K=o(64341),Q=o(67396),W=o(36356),$=o(54174),ee=o(75733),ei=o(80023),eo=o(2183),et=o(29973),ea=o(93191),er=o(40932);function es(){var e,i,o,u;let{userRole:m}=(0,k.a)(),{toast:f}=(0,N.pm)(),p=(0,ea.NL)(),[x,h]=(0,a.useState)(null),[v,g]=(0,a.useState)(!1),[j,w]=(0,a.useState)(""),[I,S]=(0,a.useState)(null),[R,Z]=(0,a.useState)(""),[E,V]=(0,a.useState)(!1),{data:P=[],isLoading:G}=(0,er.a)({queryKey:["socios"],queryFn:z.hb}),{data:T=[],isLoading:q}=(0,er.a)({queryKey:["revisiones"],queryFn:z.Bb}),{data:es=[],isLoading:en}=(0,er.a)({queryKey:["todasSolicitudesInvitados"],queryFn:z.$M}),el=(0,a.useMemo)(()=>{let e={};return P.forEach(i=>{e[i.numeroSocio]={nombre:"".concat(i.nombre," ").concat(i.apellido),numeroSocio:i.numeroSocio}}),e},[P]),ec=(0,a.useMemo)(()=>{let e=(0,C.c)(new Date,{representation:"date"});return es.filter(i=>i.fecha===e).flatMap(e=>e.listaInvitadosDiarios.map(i=>({...i,idSocioAnfitrion:e.idSocioTitular})))},[es]),ed=(0,a.useMemo)(()=>ec.filter(e=>e.ingresado).map(e=>{let i=el[e.idSocioAnfitrion];return"V\xe1lido"!==(0,b.b9)(e.aptoMedico,e.fechaNacimiento).status?{id:e.id,nombreCompleto:"".concat(e.nombre," ").concat(e.apellido),dni:e.dni,fechaNacimiento:e.fechaNacimiento,aptoMedico:e.aptoMedico,tipo:"Invitado Diario",socioAnfitrionNombre:(null==i?void 0:i.nombre)||"Desconocido",socioAnfitrionNumero:(null==i?void 0:i.numeroSocio)||e.idSocioAnfitrion}:null}).filter(Boolean),[ec,el]),eu=(0,a.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let i=T.filter(e=>!!(e.fechaRevision&&e.fechaRevision instanceof Date&&(0,y.J)(e.fechaRevision))&&(0,_.z)(e.fechaRevision)).length,o=0,t=0;[...P.map(e=>({...e,tipo:"Socio Titular",aptoMedico:e.aptoMedico,fechaNacimiento:e.fechaNacimiento})),...P.flatMap(e=>{var i;return(null===(i=e.grupoFamiliar)||void 0===i?void 0:i.map(i=>({...i,tipo:"Familiar",socioTitularId:e.numeroSocio,aptoMedico:i.aptoMedico,fechaNacimiento:i.fechaNacimiento})))||[]}),...P.flatMap(e=>{var i;return(null===(i=e.adherentes)||void 0===i?void 0:i.map(i=>({...i,tipo:"Adherente",socioTitularId:e.numeroSocio,aptoMedico:i.aptoMedico,fechaNacimiento:i.fechaNacimiento})))||[]}),...ec.map(e=>({...e,tipo:"Invitado Diario",aptoMedico:e.aptoMedico,fechaNacimiento:e.fechaNacimiento}))].forEach(i=>{var a;let r=(0,b.b9)(i.aptoMedico,i.fechaNacimiento);if(("Vencido"===r.status||"Inv\xe1lido"===r.status||"Pendiente"===r.status)&&o++,(null===(a=i.aptoMedico)||void 0===a?void 0:a.valido)&&i.aptoMedico.fechaVencimiento){let o;if(i.aptoMedico.fechaVencimiento instanceof Date&&(0,y.J)(i.aptoMedico.fechaVencimiento))o=i.aptoMedico.fechaVencimiento;else{if(!("string"==typeof i.aptoMedico.fechaVencimiento&&(0,y.J)((0,A.D)(i.aptoMedico.fechaVencimiento))))return;o=(0,A.D)(i.aptoMedico.fechaVencimiento)}if(!(0,y.J)(o))return;let a=(0,J.j)(o,e);a>=0&&a<=7&&t++}});let a=T.filter(i=>!!(i.fechaRevision&&i.fechaRevision instanceof Date&&(0,y.J)(i.fechaRevision))&&(0,L.x)(i.fechaRevision,e)).length;return{revisionesHoy:i,aptosPendientesVencidos:o,vencimientosProximos:t,revisionesEsteMes:a}},[T,P,ec]),em=(0,a.useCallback)(async()=>{if(!j.trim()){Z("Por favor, ingrese N\xb0 Socio, DNI o Nombre."),S(null);return}V(!0),S(null);let e=(0,b.bG)(j),i=null;for(let a of P){var o,t;if((0,b.bG)(a.numeroSocio).includes(e)||(0,b.bG)(a.dni).includes(e)||(0,b.bG)("".concat(a.nombre," ").concat(a.apellido)).includes(e)){i={id:a.numeroSocio,nombreCompleto:"".concat(a.nombre," ").concat(a.apellido),dni:a.dni,numeroSocio:a.numeroSocio,fechaNacimiento:a.fechaNacimiento,fotoUrl:a.fotoUrl||void 0,aptoMedico:a.aptoMedico,tipo:"Socio Titular"};break}let r=null===(o=a.grupoFamiliar)||void 0===o?void 0:o.find(i=>(0,b.bG)(i.dni).includes(e)||(0,b.bG)("".concat(i.nombre," ").concat(i.apellido)).includes(e));if(r){i={id:r.dni,nombreCompleto:"".concat(r.nombre," ").concat(r.apellido),dni:r.dni,fechaNacimiento:r.fechaNacimiento,fotoUrl:r.fotoPerfil||void 0,aptoMedico:r.aptoMedico,tipo:"Familiar",socioAnfitrionNombre:"".concat(a.nombre," ").concat(a.apellido),socioAnfitrionNumero:a.numeroSocio};break}let s=null===(t=a.adherentes)||void 0===t?void 0:t.find(i=>(0,b.bG)(i.dni).includes(e)||(0,b.bG)("".concat(i.nombre," ").concat(i.apellido)).includes(e));if(s){i={id:s.dni,nombreCompleto:"".concat(s.nombre," ").concat(s.apellido),dni:s.dni,fechaNacimiento:s.fechaNacimiento,fotoUrl:(s.fotoPerfil instanceof FileList?void 0:s.fotoPerfil)||void 0,aptoMedico:s.aptoMedico,tipo:"Adherente",socioAnfitrionNombre:"".concat(a.nombre," ").concat(a.apellido),socioAnfitrionNumero:a.numeroSocio};break}}if(!i){let o=ec.find(i=>(0,b.bG)(i.dni).includes(e)||(0,b.bG)("".concat(i.nombre," ").concat(i.apellido)).includes(e));if(o){let e=el[o.idSocioAnfitrion];i={id:o.id,nombreCompleto:"".concat(o.nombre," ").concat(o.apellido),dni:o.dni,fechaNacimiento:o.fechaNacimiento,aptoMedico:o.aptoMedico||void 0,tipo:"Invitado Diario",socioAnfitrionNombre:(null==e?void 0:e.nombre)||"Desconocido",socioAnfitrionNumero:(null==e?void 0:e.numeroSocio)||o.idSocioAnfitrion}}}i?(S(i),Z("")):(S(null),Z("Persona no encontrada.")),V(!1)},[j,P,ec,el]),ef=e=>{f({title:"Funci\xf3n no implementada",description:"Ver detalles de revisi\xf3n ".concat(e," (simulado).")})},ep=e=>{h({id:e.dni||e.id,nombreCompleto:e.nombreCompleto,fechaNacimiento:e.fechaNacimiento,tipo:e.tipo,socioTitularId:e.socioAnfitrionNumero,aptoMedicoActual:e.aptoMedico,fechaVisitaInvitado:"Invitado Diario"===e.tipo?new Date:void 0}),g(!0)};if(G||q||en)return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(eo.O,{className:"h-12 w-1/2"})," ","admin"===m&&(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,i)=>(0,t.jsx)(eo.O,{className:"h-28 w-full"},i))}),(0,t.jsx)(eo.O,{className:"h-12 w-full"})," ",(0,t.jsx)(eo.O,{className:"h-48 w-full"})," ",(0,t.jsx)(eo.O,{className:"h-96 w-full"})," "]});let ex=[{title:"Revisiones Hoy",value:eu.revisionesHoy,icon:B.Z,color:"text-blue-500"},{title:"Aptos Pendientes/Vencidos",value:eu.aptosPendientesVencidos,icon:F.Z,color:"text-red-500"},{title:"Vencimientos Pr\xf3ximos (≤7d)",value:eu.vencimientosProximos,icon:H.Z,color:"text-orange-500"},{title:"Revisiones Este Mes",value:eu.revisionesEsteMes,icon:U.Z,color:"text-green-500"}],eh=I?(0,b.b9)(I.aptoMedico,I.fechaNacimiento):null;return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center",children:[(0,t.jsx)(X.Z,{className:"mr-3 h-8 w-8 text-primary"}),"Panel M\xe9dico"]}),(0,t.jsx)(O,{onRevisionGuardada:()=>{p.invalidateQueries({queryKey:["socios"]}),p.invalidateQueries({queryKey:["revisiones"]}),p.invalidateQueries({queryKey:["todasSolicitudesInvitados"]})},open:v,onOpenChange:e=>{g(e),e||h(null)},personaPreseleccionada:x,bloquearBusqueda:!!x})]}),"admin"===m&&(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:ex.map(e=>(0,t.jsxs)(r.Zb,{className:"shadow-lg",children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ll,{className:"text-sm font-medium",children:e.title}),(0,t.jsx)(e.icon,{className:"h-5 w-5 ".concat(e.color)})]}),(0,t.jsx)(r.aY,{children:(0,t.jsx)("div",{className:"text-3xl font-bold ".concat(e.color),children:e.value})})]},e.title))}),(0,t.jsxs)(r.Zb,{className:"shadow-lg",children:[(0,t.jsxs)(r.Ol,{children:[(0,t.jsxs)(r.ll,{className:"flex items-center",children:[(0,t.jsx)(M.Z,{className:"mr-2 h-6 w-6 text-primary"}),"Buscar Persona (General)"]}),(0,t.jsx)(r.SZ,{children:"Ingrese N\xb0 Socio, DNI o Nombre para verificar su apto m\xe9dico (socios, familiares, adherentes o invitados de hoy)."}),(0,t.jsxs)("div",{className:"flex space-x-2 pt-4",children:[(0,t.jsx)(c.I,{type:"text",placeholder:"Buscar por N\xb0 Socio, DNI, Nombre...",value:j,onChange:e=>w(e.target.value),onKeyPress:e=>{"Enter"===e.key&&em()},className:"flex-grow"}),(0,t.jsxs)(l.z,{onClick:em,disabled:E,children:[(0,t.jsx)(M.Z,{className:"mr-2 h-4 w-4"})," ",E?"Buscando...":"Buscar"]})]})]}),R&&(0,t.jsx)(r.aY,{children:(0,t.jsx)("p",{className:"text-sm text-center text-muted-foreground pt-2",children:R})}),E&&(0,t.jsxs)(r.aY,{className:"pt-4 space-y-3",children:[(0,t.jsx)(eo.O,{className:"h-24 w-24 rounded-full mx-auto"}),(0,t.jsx)(eo.O,{className:"h-6 w-3/4 mx-auto"}),(0,t.jsx)(eo.O,{className:"h-4 w-1/2 mx-auto"})]}),I&&!E&&eh&&(0,t.jsx)(r.aY,{className:"pt-4",children:(0,t.jsxs)(r.Zb,{className:"bg-muted/30 p-6 shadow-md",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[(0,t.jsxs)(d.qE,{className:"h-24 w-24 border-2 border-primary",children:[(0,t.jsx)(d.F$,{src:I.fotoUrl||"https://placehold.co/96x96.png?text=".concat(I.nombreCompleto[0]).concat((null===(e=I.nombreCompleto.split(" ")[1])||void 0===e?void 0:e[0])||""),alt:I.nombreCompleto,"data-ai-hint":"person photo"}),(0,t.jsxs)(d.Q5,{className:"text-3xl",children:[I.nombreCompleto[0],(null===(i=I.nombreCompleto.split(" ")[1])||void 0===i?void 0:i[0])||""]})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-1 text-center sm:text-left",children:[(0,t.jsx)("h3",{className:"text-2xl font-semibold text-primary",children:I.nombreCompleto}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[I.tipo," ",I.dni&&"| DNI: ".concat(I.dni),I.numeroSocio&&" | N\xb0 Socio: ".concat(I.numeroSocio)]}),I.fechaNacimiento&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Nacimiento: ",(0,b.p6)(I.fechaNacimiento)]}),"Invitado Diario"===I.tipo&&I.socioAnfitrionNombre&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Invitado por: ",I.socioAnfitrionNombre," (Socio N\xb0: ",I.socioAnfitrionNumero,")"]}),"Familiar"===I.tipo&&I.socioAnfitrionNombre&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Familiar de: ",I.socioAnfitrionNombre," (Socio N\xb0: ",I.socioAnfitrionNumero,")"]}),"Adherente"===I.tipo&&I.socioAnfitrionNombre&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Adherente de: ",I.socioAnfitrionNombre," (Socio N\xb0: ",I.socioAnfitrionNumero,")"]})]})]}),(0,t.jsx)(et.Z,{className:"my-4"}),(0,t.jsxs)("div",{className:"p-4 rounded-lg border ".concat(eh.colorClass.replace("text-","text-").replace("bg-","bg-opacity-10 border-")),children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:["V\xe1lido"===eh.status&&(0,t.jsx)(Y.Z,{className:"h-7 w-7 mr-2 ".concat(eh.colorClass.replace("bg-","text-").replace("-100","-500"))}),("Vencido"===eh.status||"Inv\xe1lido"===eh.status)&&(0,t.jsx)(K.Z,{className:"h-7 w-7 mr-2 ".concat(eh.colorClass.replace("bg-","text-").replace("-100","-500"))}),"Pendiente"===eh.status&&(0,t.jsx)(H.Z,{className:"h-7 w-7 mr-2 ".concat(eh.colorClass.replace("bg-","text-").replace("-100","-500"))}),(0,t.jsxs)("h4",{className:"text-xl font-semibold ".concat(eh.colorClass.replace("bg-","text-").replace("-100","-600")),children:["Apto M\xe9dico: ",eh.status]})]}),(0,t.jsx)("p",{className:"text-sm ".concat(eh.colorClass.replace("bg-","text-").replace("-100","-500")," mb-1"),children:eh.message}),(null===(o=I.aptoMedico)||void 0===o?void 0:o.fechaEmision)&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Emitido: ",(0,b.p6)(I.aptoMedico.fechaEmision)]}),(null===(u=I.aptoMedico)||void 0===u?void 0:u.observaciones)&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Observaciones: ",I.aptoMedico.observaciones]}),"Socio Titular"===I.tipo&&I.ultimaRevisionMedica&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["\xdaltima Revisi\xf3n M\xe9dica Registrada: ",(0,b.p6)(I.ultimaRevisionMedica)," "]})]})]})})]}),"admin"===m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.Zb,{className:"shadow-lg",children:[(0,t.jsxs)(r.Ol,{children:[(0,t.jsxs)(r.ll,{className:"flex items-center",children:[(0,t.jsx)(D.Z,{className:"mr-2 h-6 w-6 text-primary"}),"Invitados del D\xeda Ingresados (Hoy)"]}),(0,t.jsx)(r.SZ,{children:"Lista de invitados que han registrado su ingreso hoy. Puede registrar o actualizar su revisi\xf3n m\xe9dica desde aqu\xed."})]}),(0,t.jsx)(r.aY,{children:(0,t.jsx)(ei.x,{className:"h-[300px] w-full",children:(0,t.jsxs)(s.iA,{children:[(0,t.jsx)(s.xD,{children:(0,t.jsxs)(s.SC,{children:[(0,t.jsx)(s.ss,{children:"Invitado"}),(0,t.jsx)(s.ss,{children:"DNI"}),(0,t.jsx)(s.ss,{children:"Anfitri\xf3n"}),(0,t.jsx)(s.ss,{children:"Apto M\xe9dico (Hoy)"}),(0,t.jsx)(s.ss,{className:"text-right",children:"Acci\xf3n"})]})}),(0,t.jsxs)(s.RM,{children:[0===ed.length&&(0,t.jsx)(s.SC,{children:(0,t.jsx)(s.pj,{colSpan:5,className:"text-center text-muted-foreground py-6",children:"No hay invitados que hayan ingresado hoy o todos tienen apto m\xe9dico v\xe1lido."})},"no-invitados-row"),ed.map((e,i)=>{let o=(0,b.b9)(e.aptoMedico,e.fechaNacimiento),a="invitado-".concat(e.id||"no-id","-").concat(e.dni||"no-dni","-").concat(i);return(0,t.jsxs)(s.SC,{children:[(0,t.jsx)(s.pj,{className:"font-medium",children:e.nombreCompleto}),(0,t.jsx)(s.pj,{children:e.dni}),(0,t.jsxs)(s.pj,{children:[e.socioAnfitrionNombre," (N\xb0",e.socioAnfitrionNumero,")"]}),(0,t.jsx)(s.pj,{children:(0,t.jsx)(n.C,{variant:"outline",className:"".concat(o.colorClass," border-current font-medium"),children:o.status})}),(0,t.jsx)(s.pj,{className:"text-right",children:(0,t.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>ep(e),children:[(0,t.jsx)(Q.Z,{className:"mr-1.5 h-4 w-4"}),"Revisi\xf3n"]})})]},a)})]})]})})})]}),(0,t.jsxs)(r.Zb,{className:"shadow-lg",children:[(0,t.jsxs)(r.Ol,{children:[(0,t.jsxs)(r.ll,{className:"flex items-center",children:[(0,t.jsx)(W.Z,{className:"mr-2 h-6 w-6 text-primary"})," \xdaltimas Revisiones Registradas"]}),(0,t.jsx)(r.SZ,{children:"Mostrando las \xfaltimas 10 revisiones. El apto es v\xe1lido por 15 d\xedas desde la fecha de revisi\xf3n (incluida) para todas las personas (socios, familiares, adherentes e invitados)."})]}),(0,t.jsx)(r.aY,{children:(0,t.jsx)(ei.x,{className:"h-[400px] w-full",children:(0,t.jsxs)(s.iA,{children:[(0,t.jsx)(s.xD,{children:(0,t.jsxs)(s.SC,{children:[(0,t.jsx)(s.ss,{children:"Fecha Revisi\xf3n"}),(0,t.jsx)(s.ss,{children:"Persona (Nombre y DNI/ID)"}),(0,t.jsx)(s.ss,{children:"Tipo"}),(0,t.jsx)(s.ss,{children:"Resultado"}),(0,t.jsx)(s.ss,{children:"Vencimiento Apto"}),(0,t.jsx)(s.ss,{children:"Observaciones"}),(0,t.jsx)(s.ss,{children:"M\xe9dico"}),(0,t.jsx)(s.ss,{className:"text-right",children:"Acciones"})]})}),(0,t.jsxs)(s.RM,{children:[T.slice(0,10).map(e=>{let i=(0,t.jsx)($.Z,{className:"mr-1 h-3.5 w-3.5"});return"Invitado Diario"===e.tipoPersona&&(i=(0,t.jsx)(D.Z,{className:"mr-1 h-3.5 w-3.5"})),(0,t.jsxs)(s.SC,{children:[(0,t.jsx)(s.pj,{children:(0,b.p6)(e.fechaRevision)}),(0,t.jsxs)(s.pj,{children:[e.socioNombre," (",e.socioId,")"]}),(0,t.jsx)(s.pj,{children:(0,t.jsxs)(n.C,{variant:"outline",className:"flex items-center",children:[i,e.tipoPersona]})}),(0,t.jsx)(s.pj,{children:(0,t.jsx)(n.C,{variant:"Apto"===e.resultado?"default":"destructive",className:"Apto"===e.resultado?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600",children:e.resultado})}),(0,t.jsx)(s.pj,{children:"Apto"===e.resultado&&e.fechaVencimientoApto?(0,b.p6)(e.fechaVencimientoApto):"N/A"}),(0,t.jsx)(s.pj,{className:"max-w-[200px] truncate",title:e.observaciones,children:e.observaciones||"-"}),(0,t.jsx)(s.pj,{className:"max-w-[150px] truncate",title:e.medicoResponsable,children:e.medicoResponsable||"No especificado"}),(0,t.jsx)(s.pj,{className:"text-right",children:(0,t.jsx)(l.z,{variant:"ghost",size:"icon",onClick:()=>ef(e.id),title:"Ver detalles de la revisi\xf3n",children:(0,t.jsx)(ee.Z,{className:"h-4 w-4"})})})]},e.id)}),0===T.length&&(0,t.jsx)(s.SC,{children:(0,t.jsx)(s.pj,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"No hay revisiones registradas."})})]})]})})})]})]})]})}},87992:function(e,i,o){"use strict";o.d(i,{Cd:function(){return c},X:function(){return d},bZ:function(){return l}});var t=o(57437),a=o(2265),r=o(13027),s=o(49354);let n=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef((e,i)=>{let{className:o,variant:a,...r}=e;return(0,t.jsx)("div",{ref:i,role:"alert",className:(0,s.cn)(n({variant:a}),o),...r})});l.displayName="Alert";let c=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("h5",{ref:i,className:(0,s.cn)("mb-1 font-medium leading-none tracking-tight",o),...a})});c.displayName="AlertTitle";let d=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("div",{ref:i,className:(0,s.cn)("text-sm [&_p]:leading-relaxed",o),...a})});d.displayName="AlertDescription"},80420:function(e,i,o){"use strict";o.d(i,{F$:function(){return l},Q5:function(){return c},qE:function(){return n}});var t=o(57437),a=o(2265),r=o(44458),s=o(49354);let n=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)(r.fC,{ref:i,className:(0,s.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",o),...a})});n.displayName=r.fC.displayName;let l=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)(r.Ee,{ref:i,className:(0,s.cn)("aspect-square h-full w-full",o),...a})});l.displayName=r.Ee.displayName;let c=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)(r.NY,{ref:i,className:(0,s.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",o),...a})});c.displayName=r.NY.displayName},79055:function(e,i,o){"use strict";o.d(i,{C:function(){return n}});var t=o(57437);o(2265);var a=o(13027),r=o(49354);let s=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:i,variant:o,...a}=e;return(0,t.jsx)("div",{className:(0,r.cn)(s({variant:o}),i),...a})}},48185:function(e,i,o){"use strict";o.d(i,{Ol:function(){return n},SZ:function(){return c},Zb:function(){return s},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var t=o(57437),a=o(2265),r=o(49354);let s=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("div",{ref:i,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",o),...a})});s.displayName="Card";let n=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("div",{ref:i,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",o),...a})});n.displayName="CardHeader";let l=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("div",{ref:i,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",o),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("div",{ref:i,className:(0,r.cn)("text-sm text-muted-foreground",o),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("div",{ref:i,className:(0,r.cn)("p-6 pt-0",o),...a})});d.displayName="CardContent";let u=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("div",{ref:i,className:(0,r.cn)("flex items-center p-6 pt-0",o),...a})});u.displayName="CardFooter"},54662:function(e,i,o){"use strict";o.d(i,{$N:function(){return h},Be:function(){return v},GG:function(){return u},Vq:function(){return l},cN:function(){return x},cZ:function(){return f},fK:function(){return p},hg:function(){return c}});var t=o(57437),a=o(2265),r=o(78851),s=o(74697),n=o(49354);let l=r.fC,c=r.xz,d=r.h_,u=r.x8,m=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)(r.aV,{ref:i,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",o),...a})});m.displayName=r.aV.displayName;let f=a.forwardRef((e,i)=>{let{className:o,children:a,...l}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(r.VY,{ref:i,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",o),...l,children:[a,(0,t.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(s.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=r.VY.displayName;let p=e=>{let{className:i,...o}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",i),...o})};p.displayName="DialogHeader";let x=e=>{let{className:i,...o}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i),...o})};x.displayName="DialogFooter";let h=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)(r.Dx,{ref:i,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",o),...a})});h.displayName=r.Dx.displayName;let v=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)(r.dk,{ref:i,className:(0,n.cn)("text-sm text-muted-foreground",o),...a})});v.displayName=r.dk.displayName},93363:function(e,i,o){"use strict";o.d(i,{NI:function(){return h},Wi:function(){return u},l0:function(){return c},lX:function(){return x},pf:function(){return v},xJ:function(){return p},zG:function(){return N}});var t=o(57437),a=o(2265),r=o(71538),s=o(39343),n=o(49354),l=o(70402);let c=s.RV,d=a.createContext({}),u=e=>{let{...i}=e;return(0,t.jsx)(d.Provider,{value:{name:i.name},children:(0,t.jsx)(s.Qr,{...i})})},m=()=>{let e=a.useContext(d),i=a.useContext(f),{getFieldState:o,formState:t}=(0,s.Gc)(),r=o(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=i;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...r}},f=a.createContext({}),p=a.forwardRef((e,i)=>{let{className:o,...r}=e,s=a.useId();return(0,t.jsx)(f.Provider,{value:{id:s},children:(0,t.jsx)("div",{ref:i,className:(0,n.cn)("space-y-2",o),...r})})});p.displayName="FormItem";let x=a.forwardRef((e,i)=>{let{className:o,...a}=e,{error:r,formItemId:s}=m();return(0,t.jsx)(l._,{ref:i,className:(0,n.cn)(r&&"text-destructive",o),htmlFor:s,...a})});x.displayName="FormLabel";let h=a.forwardRef((e,i)=>{let{...o}=e,{error:a,formItemId:s,formDescriptionId:n,formMessageId:l}=m();return(0,t.jsx)(r.g7,{ref:i,id:s,"aria-describedby":a?"".concat(n," ").concat(l):"".concat(n),"aria-invalid":!!a,...o})});h.displayName="FormControl";let v=a.forwardRef((e,i)=>{let{className:o,...a}=e,{formDescriptionId:r}=m();return(0,t.jsx)("p",{ref:i,id:r,className:(0,n.cn)("text-sm text-muted-foreground",o),...a})});v.displayName="FormDescription";let N=a.forwardRef((e,i)=>{var o;let{className:a,children:r,...s}=e,{error:l,formMessageId:c}=m(),d=l?String(null!==(o=null==l?void 0:l.message)&&void 0!==o?o:""):r;return d?(0,t.jsx)("p",{ref:i,id:c,className:(0,n.cn)("text-sm font-medium text-destructive",a),...s,children:d}):null});N.displayName="FormMessage"},77209:function(e,i,o){"use strict";o.d(i,{I:function(){return s}});var t=o(57437),a=o(2265),r=o(49354);let s=a.forwardRef((e,i)=>{let{className:o,type:a,value:s,...n}=e;return(0,t.jsx)("input",{type:a,value:null==s?"":s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:i,...n})});s.displayName="Input"},70402:function(e,i,o){"use strict";o.d(i,{_:function(){return c}});var t=o(57437),a=o(2265),r=o(38364),s=o(13027),n=o(49354);let l=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)(r.f,{ref:i,className:(0,n.cn)(l(),o),...a})});c.displayName=r.f.displayName},80112:function(e,i,o){"use strict";o.d(i,{E:function(){return l},m:function(){return c}});var t=o(57437),a=o(2265),r=o(99497),s=o(28165),n=o(49354);let l=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)(r.fC,{className:(0,n.cn)("grid gap-2",o),...a,ref:i})});l.displayName=r.fC.displayName;let c=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)(r.ck,{ref:i,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),...a,children:(0,t.jsx)(r.z$,{className:"flex items-center justify-center",children:(0,t.jsx)(s.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=r.ck.displayName},80023:function(e,i,o){"use strict";o.d(i,{x:function(){return n}});var t=o(57437),a=o(2265),r=o(26770),s=o(49354);let n=a.forwardRef((e,i)=>{let{className:o,children:a,...n}=e;return(0,t.jsxs)(r.fC,{ref:i,className:(0,s.cn)("relative overflow-hidden",o),...n,children:[(0,t.jsx)(r.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,t.jsx)(l,{}),(0,t.jsx)(r.Ns,{})]})});n.displayName=r.fC.displayName;let l=a.forwardRef((e,i)=>{let{className:o,orientation:a="vertical",...n}=e;return(0,t.jsx)(r.gb,{ref:i,orientation:a,className:(0,s.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",o),...n,children:(0,t.jsx)(r.q4,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=r.gb.displayName},29973:function(e,i,o){"use strict";o.d(i,{Z:function(){return n}});var t=o(57437),a=o(2265),r=o(48484),s=o(49354);let n=a.forwardRef((e,i)=>{let{className:o,orientation:a="horizontal",decorative:n=!0,...l}=e;return(0,t.jsx)(r.f,{ref:i,decorative:n,orientation:a,className:(0,s.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",o),...l})});n.displayName=r.f.displayName},2183:function(e,i,o){"use strict";o.d(i,{O:function(){return r}});var t=o(57437),a=o(49354);function r(e){let{className:i,...o}=e;return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",i),...o})}},47304:function(e,i,o){"use strict";o.d(i,{RM:function(){return l},SC:function(){return c},iA:function(){return s},pj:function(){return u},ss:function(){return d},xD:function(){return n}});var t=o(57437),a=o(2265),r=o(49354);let s=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:i,className:(0,r.cn)("w-full caption-bottom text-sm",o),...a})})});s.displayName="Table";let n=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("thead",{ref:i,className:(0,r.cn)("[&_tr]:border-b",o),...a})});n.displayName="TableHeader";let l=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("tbody",{ref:i,className:(0,r.cn)("[&_tr:last-child]:border-0",o),...a})});l.displayName="TableBody",a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("tfoot",{ref:i,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",o),...a})}).displayName="TableFooter";let c=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("tr",{ref:i,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",o),...a})});c.displayName="TableRow";let d=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("th",{ref:i,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",o),...a})});d.displayName="TableHead";let u=a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("td",{ref:i,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",o),...a})});u.displayName="TableCell",a.forwardRef((e,i)=>{let{className:o,...a}=e;return(0,t.jsx)("caption",{ref:i,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",o),...a})}).displayName="TableCaption"},4919:function(e,i,o){"use strict";o.d(i,{g:function(){return s}});var t=o(57437),a=o(2265),r=o(49354);let s=a.forwardRef((e,i)=>{let{className:o,value:a,...s}=e;return(0,t.jsx)("textarea",{value:null==a?"":a,className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:i,...s})});s.displayName="Textarea"},1663:function(e,i,o){"use strict";o.d(i,{J:function(){return f},Q:function(){return p}});var t=o(54174),a=o(11240),r=o(22023),s=o(43267),n=o(86162),l=o(82244),c=o(36141),d=o(72377),u=o(51077),m=o(56143);let f={name:"Allegro",description:"Sistema de gesti\xf3n integral para un club deportivo y social."},p=[{id:"mi-perfil-vista",title:"Mi Perfil",description:"Visualiza tus datos personales y de membres\xeda.",icon:t.Z,href:"/mi-perfil",roles:["socio"]},{id:"gestionar-familiares",title:"Gestionar Grupo Familiar",description:"Agrega o modifica los datos de tu grupo familiar.",icon:a.Z,href:"/perfil",roles:["socio"]},{id:"carnet-digital",title:"Carnet Digital",description:"Accede a tu carnet de socio digital.",icon:r.Z,href:"/carnet",roles:["socio"]},{id:"invitados-diarios",title:"Cargar Invitados del D\xeda",description:"Registra tus invitados para el acceso diario.",icon:s.Z,href:"/invitados-diarios",roles:["socio"]},{id:"mis-adherentes",title:"Mis Adherentes",description:"Gestiona tus adherentes y sus solicitudes.",icon:n.Z,href:"/mis-adherentes",roles:["socio"]},{id:"gestion-socios",title:"Gesti\xf3n de Socios",description:"Administra la base de datos de socios.",icon:a.Z,href:"/admin/gestion-socios",roles:["admin"]},{id:"panel-medico",title:"Panel M\xe9dico",description:"Gestiona revisiones m\xe9dicas y aptos f\xedsicos.",icon:l.Z,href:"/admin/panel-medico",roles:["medico","admin"]},{id:"control-acceso",title:"Control de Acceso",description:"Verifica el estado de socios para el ingreso.",icon:c.Z,href:"/admin/control-acceso",roles:["portero","admin"]},{id:"gestion-invitados-diarios-admin",title:"Listas de Invitados",description:"Revisa y descarga listas de invitados diarios.",icon:d.Z,href:"/admin/gestion-invitados-diarios",roles:["admin"]},{id:"configuracion-precios",title:"Configurar Precios",description:"Establece los precios de las entradas para invitados.",icon:u.Z,href:"/admin/configuracion-precios",roles:["admin"]},{id:"gestion-novedades",title:"Gesti\xf3n de Novedades",description:"Crea y administra novedades y alertas.",icon:m.Z,href:"/admin/gestion-novedades",roles:["admin"]}]},39630:function(e,i,o){"use strict";o.d(i,{H:function(){return u},V:function(){return d}});var t=o(57437),a=o(2265),r=o(75735),s=o(25419),n=o(26912),l=o(94282),c=o(86763);let d=(0,a.createContext)(void 0),u=e=>{let{children:i}=e,[o,u]=(0,a.useState)(null),[m,f]=(0,a.useState)(null),[p,x]=(0,a.useState)(null),[h,v]=(0,a.useState)(null),[N,b]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=()=>{};return s.I8&&(e=(0,r.Aj)(s.I8,async e=>{if(b(!0),e){u(e),console.log("Firebase Auth UID for logged-in user:",e.uid);try{let i=await (0,n.AZ)(e.uid);if(i)f(i.role),x("".concat(i.nombre," ").concat(i.apellido)),v(i.numeroSocio);else{let i=await (0,n.Xt)(e.uid);i?(f(i.role),x(i.name)):(console.warn("User with UID ".concat(e.uid," and email ").concat(e.email," is authenticated but has no profile in 'socios' or 'adminUsers' collections. Assign a role in Firestore to grant access.")),f(null),x(e.displayName||e.email)),v(null)}}catch(i){console.error("AuthContext: Failed to fetch user profile from Firestore.",i),(0,c.Am)({title:"Error de Permisos o Conexi\xf3n",description:"No se pudo cargar tu perfil. Esto puede deberse a un problema de conexi\xf3n o a que las reglas de seguridad de Firestore no permiten el acceso. Contacte al administrador.",variant:"destructive",duration:1e4}),f(null),x(e.displayName||e.email),v(null)}}else u(null),f(null),x(null),v(null);b(!1)})),()=>e()},[]);let g=async()=>{await (0,l.TX)()};return(0,t.jsx)(d.Provider,{value:{isLoggedIn:!!o,user:o,userRole:m,userName:p,loggedInUserNumeroSocio:h,isLoading:N,logout:g},children:i})}},67048:function(e,i,o){"use strict";o.d(i,{a:function(){return r}});var t=o(2265),a=o(39630);let r=()=>{let e=(0,t.useContext)(a.V);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},94282:function(e,i,o){"use strict";o.d(i,{EL:function(){return l},TX:function(){return c},pH:function(){return n}});var t=o(75735),a=o(25419),r=o(86763),s=o(26912);let n=async(e,i)=>{try{if(!a.I8)throw Error("Auth service not initialized.");return(await (0,t.e5)(a.I8,e,i)).user}catch(e){return console.error("Firebase login error:",e),(0,r.Am)({title:"Error de Inicio de Sesi\xf3n",description:"Email o contrase\xf1a incorrectos. Por favor, intente de nuevo.",variant:"destructive"}),null}},l=async e=>{try{if(!a.I8)throw Error("Auth service not initialized.");let i=(await (0,t.Xb)(a.I8,e.email,e.password)).user;await (0,t.ck)(i,{displayName:"".concat(e.nombre," ").concat(e.apellido)});let o=async(e,o)=>e instanceof FileList&&e.length>0?(0,s.cT)(e[0],"socios/".concat(i.uid,"/").concat(o)):null,[r,n,l,c]=await Promise.all([o(e.fotoPerfil,"fotoPerfil.jpg"),o(e.fotoDniFrente,"fotoDniFrente.jpg"),o(e.fotoDniDorso,"fotoDniDorso.jpg"),o(e.fotoCarnet,"fotoCarnet.jpg")]),d={email:e.email,nombre:e.nombre,apellido:e.apellido,fechaNacimiento:e.fechaNacimiento,dni:e.dni,empresa:e.empresa,telefono:e.telefono,direccion:e.direccion,fotoUrl:r,fotoPerfil:r,fotoDniFrente:n,fotoDniDorso:l,fotoCarnet:c,grupoFamiliar:[]};return await (0,s.l1)(i.uid,d,!0),i}catch(i){console.error("Firebase signup error:",i);let e="Ocurri\xf3 un error inesperado al crear la cuenta.";return"auth/email-already-in-use"===i.code&&(e="El email ingresado ya est\xe1 en uso. Por favor, utilice otro."),(0,r.Am)({title:"Error de Registro",description:e,variant:"destructive"}),null}},c=async()=>{try{if(!a.I8)throw Error("Auth service not initialized.");await (0,t.w7)(a.I8)}catch(e){console.error("Error signing out:",e),(0,r.Am)({title:"Error",description:"No se pudo cerrar la sesi\xf3n.",variant:"destructive"})}}}},function(e){e.O(0,[4358,139,4868,317,9772,3906,4414,8384,2876,932,73,4141,2301,6068,2971,7023,1744],function(){return e(e.s=97256)}),_N_E=e.O()}]);