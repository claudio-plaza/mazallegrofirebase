"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6068],{89733:function(e,t,r){r.d(t,{d:function(){return c},z:function(){return d}});var o=r(57437),i=r(2265),n=r(71538),a=r(13027),s=r(49354);let c=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:r,variant:i,size:a,asChild:d=!1,...u}=e,l=d?n.g7:"button";return(0,o.jsx)(l,{className:(0,s.cn)(c({variant:i,size:a,className:r})),ref:t,...u})});d.displayName="Button"},86763:function(e,t,r){r.d(t,{Am:function(){return l},pm:function(){return f}});var o=r(2265);let i=0,n=new Map,a=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},s=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function u(e){d=s(d,e),c.forEach(e=>{e(d)})}function l(e){let{...t}=e,r=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||o()}}}),{id:r,dismiss:o,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=o.useState(d);return o.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:l,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},25419:function(e,t,r){let o,i,n,a;r.d(t,{I8:function(){return n},db:function(){return i},tO:function(){return a}});var s=r(15236),c=r(75735),d=r(69842),u=r(99854);let l={apiKey:"AIzaSyB_OqHXIjYCXkRMGLjxwXVTxDCA2HN-eRk",authDomain:"clubzenith.firebaseapp.com",projectId:"clubzenith",storageBucket:"clubzenith.firebasestorage.app",messagingSenderId:"720998936376",appId:"1:720998936376:web:8a708a63fe10310a795bcd"};Object.values(l).some(e=>!e||"string"==typeof e&&e.includes("your-project-id"))&&console.warn("\n\n*** FIREBASE CONFIG WARNING ***\nYou are using placeholder Firebase credentials. The app will run, but Firebase features like login and data storage will not work.\nPlease update your Firebase configuration in the '.env' file.\nSee the comments in 'src/lib/firebase/config.ts' for instructions.\n\n"),o=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)(l),i=(0,d.LV)(o,{localCache:(0,d.ms)()},"allegro-db"),n=(0,c.v0)(o),a=(0,u.cF)(o)},26912:function(e,t,r){r.d(t,{$M:function(){return T},AZ:function(){return y},Bb:function(){return C},C8:function(){return O},Lc:function(){return U},Md:function(){return B},RD:function(){return M},Tg:function(){return A},Xt:function(){return I},ad:function(){return _},cG:function(){return x},cT:function(){return m},cv:function(){return N},g1:function(){return D},hb:function(){return w},l1:function(){return E},sr:function(){return V},uL:function(){return S},xW:function(){return F},yk:function(){return z}});var o=r(69842),i=r(25419),n=r(99854),a=r(92033);let s=(e,t)=>{console.error("Firestore error in ".concat(t,":"),e),("permission-denied"===e.code||e.message.includes("offline"))&&console.error("PERMISSION DENIED OR OFFLINE: This is very likely a Firestore rules issue or the database has not been created correctly. \n1. Go to your Firebase Console -> Firestore Database. \n2. Ensure you have created a database in a specific region (e.g., us-central). \n3. Go to the \"Rules\" tab and ensure they allow access for authenticated users. A good starting point for testing is:\n\nrules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    match /{document=**} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}")},c=i.db?(0,o.hJ)(i.db,"socios"):{},d=i.db?(0,o.hJ)(i.db,"revisionesMedicas"):{},u=i.db?(0,o.hJ)(i.db,"solicitudesInvitadosDiarios"):{},l=i.db?(0,o.hJ)(i.db,"novedades"):{};i.db&&(0,o.hJ)(i.db,"adminUsers");let f=(e,t)=>{if("timestamp"===t&&e instanceof Date)return o.EK.fromDate(e);if("date"===t&&e instanceof o.EK)return e.toDate();if(Array.isArray(e))return e.map(e=>f(e,t));if(e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)){let r={};for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=f(e[o],t));return r}return e},h=()=>({toFirestore:e=>f(e,"timestamp"),fromFirestore:(e,t)=>({...f(e.data(t),"date"),id:e.id})}),b=h(),g=h(),p=h(),v=h(),m=async(e,t)=>{if(!i.tO)throw Error("Firebase Storage not initialized.");let r=(0,n.iH)(i.tO,t),o=await (0,n.KV)(r,e);return(0,n.Jt)(o.ref)},w=async()=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let e=(0,o.IO)(c).withConverter(b);return(await (0,o.PL)(e)).docs.map(e=>e.data())}catch(e){throw s(e,"getSocios"),e}},y=async e=>{if(!e)return null;try{if(!i.db)throw Error("Firestore DB not initialized.");let t=(0,o.JU)(i.db,"socios",e).withConverter(b),r=await (0,o.QT)(t);return r.exists()?r.data():null}catch(t){return s(t,"getSocioById for id: ".concat(e)),null}},D=async e=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let t=(0,a.bG)(e),r=(0,o.IO)(c,(0,o.ar)("numeroSocio","==",e.toUpperCase()),(0,o.b9)(1)).withConverter(b),i=await (0,o.PL)(r);if(!i.empty||(r=(0,o.IO)(c,(0,o.ar)("dni","==",t),(0,o.b9)(1)).withConverter(b),!(i=await (0,o.PL)(r)).empty))return i.docs[0].data();for(let e of(await w())){if((0,a.bG)("".concat(e.nombre," ").concat(e.apellido)).includes(t))return e;if(e.grupoFamiliar){for(let r of e.grupoFamiliar)if((0,a.bG)(r.dni)===t||(0,a.bG)("".concat(r.nombre," ").concat(r.apellido)).includes(t))return e}if(e.adherentes){for(let r of e.adherentes)if((0,a.bG)(r.dni)===t||(0,a.bG)("".concat(r.nombre," ").concat(r.apellido)).includes(t))return e}}return null}catch(t){throw s(t,"getSocioByNumeroSocioOrDNI for term: ".concat(e)),t}},I=async e=>{if(!e)return null;try{if(!i.db)throw Error("Firestore DB not initialized.");let t=(0,o.JU)(i.db,"adminUsers",e),r=await (0,o.QT)(t);if(r.exists())return r.data();return null}catch(t){return s(t,"getAdminUserById for uid: ".concat(e)),null}},E=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!i.db)throw Error("Firestore DB not initialized.");try{let i={...t,numeroSocio:"S".concat(Math.floor(1e5+9e5*Math.random())),role:"socio",estadoSocio:r?"Pendiente Validacion":"Activo",miembroDesde:new Date,aptoMedico:{valido:!1,razonInvalidez:"Pendiente de presentaci\xf3n"}};if(!e)throw Error("UID is missing for socio creation.");let n=(0,o.JU)(c,e).withConverter(b);return await (0,o.pl)(n,i),{...i,id:e}}catch(t){throw s(t,"addSocio for user UID: ".concat(e)),t}},S=async e=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let{id:t,...r}=e,n=(0,o.JU)(i.db,"socios",t).withConverter(b);await (0,o.r7)(n,r)}catch(t){throw s(t,"updateSocio for id: ".concat(e.id)),t}},F=async e=>{if(!i.db)throw Error("Firestore DB not initialized.");try{return await (0,o.oe)((0,o.JU)(i.db,"socios",e)),!0}catch(t){return s(t,"deleteSocio for id: ".concat(e)),!1}},C=async()=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let e=(0,o.IO)(d,(0,o.Xo)("fechaRevision","desc"),(0,o.b9)(20)).withConverter(g);return(await (0,o.PL)(e)).docs.map(e=>e.data())}catch(e){throw s(e,"getRevisionesMedicas"),e}},O=async e=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let t=await (0,o.ET)(d.withConverter(g),e);return{...e,id:t.id}}catch(t){throw s(t,"addRevisionMedica for socio: ".concat(e.socioNombre)),t}},T=async()=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let e=(0,o.IO)(u).withConverter(p);return(await (0,o.PL)(e)).docs.map(e=>e.data())}catch(e){throw s(e,"getAllSolicitudesInvitadosDiarios"),e}},z=async(e,t)=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let r=(0,o.IO)(u,(0,o.ar)("idSocioTitular","==",e),(0,o.ar)("fecha","==",t),(0,o.b9)(1)).withConverter(p),i=await (0,o.PL)(r);return i.empty?null:i.docs[0].data()}catch(r){throw s(r,"getSolicitudInvitadosDiarios for socio: ".concat(e," on date: ").concat(t)),r}},A=async e=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let t=await z(e.idSocioTitular,e.fecha),r=t?t.id:e.id,n=(0,o.JU)(i.db,"solicitudesInvitadosDiarios",r).withConverter(p);return await (0,o.pl)(n,e,{merge:!0}),{...e,id:r}}catch(t){throw s(t,"addOrUpdateSolicitudInvitadosDiarios for socio: ".concat(e.idSocioTitular)),t}},x=async e=>A(e),B=async()=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let e=(0,o.JU)(i.db,"config","preciosInvitados"),t=await (0,o.QT)(e);if(t.exists())return t.data();return{precioInvitadoDiario:0,precioInvitadoCumpleanos:0}}catch(e){throw s(e,"getPreciosInvitados"),e}},N=async e=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let t=(0,o.JU)(i.db,"config","preciosInvitados");await (0,o.pl)(t,e,{merge:!0})}catch(e){throw s(e,"updatePreciosInvitados"),e}},M=async()=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let e=(0,o.IO)(l,(0,o.Xo)("fechaCreacion","desc")).withConverter(v);return(await (0,o.PL)(e)).docs.map(e=>e.data())}catch(e){throw s(e,"getNovedades"),e}},_=async e=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let t={...e,fechaCreacion:new Date},r=await (0,o.ET)(l.withConverter(v),t);return{...t,id:r.id}}catch(t){throw s(t,"addNovedad with title: ".concat(e.titulo)),t}},U=async e=>{if(!i.db)throw Error("Firestore DB not initialized.");try{let{id:t,...r}=e,n=(0,o.JU)(i.db,"novedades",t).withConverter(v);return await (0,o.r7)(n,r),e}catch(t){throw s(t,"updateNovedad for id: ".concat(e.id)),t}},V=async e=>{if(!i.db)throw Error("Firestore DB not initialized.");try{return await (0,o.oe)((0,o.JU)(i.db,"novedades",e)),!0}catch(t){return s(t,"deleteNovedad for id: ".concat(e)),!1}}},92033:function(e,t,r){r.d(t,{Gs:function(){return v},Ox:function(){return p},b9:function(){return b},bG:function(){return m},dz:function(){return w},p6:function(){return h},qm:function(){return g}});var o=r(80624),i=r(54184),n=r(97e3),a=r(82477),s=r(56717),c=r(76538),d=r(33831),u=r(12398),l=r(79744),f=r(81608);let h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy";if(!e)return"N/A";try{let r;if(e instanceof Date)r=e;else{if("string"!=typeof e)return console.error("formatDate received an invalid type:",e),"Entrada inv\xe1lida";r=(0,o.D)(e)}if(!(0,i.J)(r))return"Fecha inv\xe1lida";return(0,n.WU)(r,t,{locale:f.es})}catch(t){return console.error("Error formatting date:",e,t),"Error fecha"}},b=(e,t)=>{if(t)try{let e="string"==typeof t?(0,o.D)(t):t;if((0,i.J)(e)&&3>(0,a.o)(new Date,e))return{status:"No Aplica",message:"Menor de 3 a\xf1os (revisi\xf3n no requerida)",colorClass:"text-gray-600 bg-gray-100"}}catch(e){}if(!e)return{status:"Pendiente",message:"Sin datos de apto m\xe9dico",colorClass:"text-yellow-600 bg-yellow-100"};if(!1===e.valido&&e.razonInvalidez)return{status:"Inv\xe1lido",message:"Inv\xe1lido (".concat(e.razonInvalidez,")"),colorClass:"text-red-600 bg-red-100"};if(!1===e.valido)return{status:"Inv\xe1lido",message:"No Apto (Raz\xf3n no especificada)",colorClass:"text-red-600 bg-red-100"};if(e.valido&&e.fechaVencimiento){let t;let r=new Date;if(r.setHours(0,0,0,0),e.fechaVencimiento instanceof Date)t=e.fechaVencimiento;else{if("string"!=typeof e.fechaVencimiento)return console.error("Invalid type for aptoMedico.fechaVencimiento:",e.fechaVencimiento),{status:"Error",message:"Formato de fecha de vencimiento interno inv\xe1lido.",colorClass:"text-red-600 bg-red-100"};t=(0,o.D)(e.fechaVencimiento)}if(!(0,i.J)(t))return{status:"Error",message:"Fecha de vencimiento inv\xe1lida tras procesar.",colorClass:"text-red-600 bg-red-100"};let n=new Date(t.valueOf());if(n.setHours(23,59,59,999),!((0,s.A)(n,r)||(0,c.X)(n,r)))return{status:"Vencido",message:"Vencido (Venci\xf3 el ".concat(h(t),")"),colorClass:"text-red-600 bg-red-100"};{let e=(0,d.j)(n,r),o="text-green-600 bg-green-100";return e<=7&&(o="text-orange-600 bg-orange-100"),{status:"V\xe1lido",message:"V\xe1lido hasta: ".concat(h(t)),colorClass:o}}}return e.valido&&!e.fechaVencimiento?{status:"V\xe1lido",message:"V\xe1lido (Sin fecha de vencimiento especificada)",colorClass:"text-green-600 bg-green-100"}:{status:"Pendiente",message:"Apto m\xe9dico pendiente o informaci\xf3n incompleta",colorClass:"text-yellow-600 bg-yellow-100"}},g=e=>e&&e.length>0&&e[0]instanceof File?URL.createObjectURL(e[0]):null,p=()=>Math.random().toString(36).substr(2,9),v=e=>{let t;if(!e)return!1;if("string"==typeof e)t=(0,o.D)(e);else{if(!(e instanceof Date))return!1;t=e}if(!(0,i.J)(t)||t.getTime()===new Date(0).getTime())return!1;let r=new Date;return(0,u.j)(r)===(0,u.j)(t)&&(0,l._)(r)===(0,l._)(t)},m=e=>null==e?"":String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),w=e=>{if(!(0,i.J)(e))return!1;let t=(0,u.j)(e),r=(0,l._)(e);return 11===t&&25===r||0===t&&1===r}},49354:function(e,t,r){r.d(t,{cn:function(){return n}});var o=r(44839),i=r(96164);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,o.W)(t))}}}]);