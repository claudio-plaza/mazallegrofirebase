(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6567],{19387:function(e,t,a){Promise.resolve().then(a.bind(a,98963))},98963:function(e,t,a){"use strict";a.d(t,{ControlAcceso:function(){return _}});var s=a(57437),i=a(2265),o=a(64451),r=a(48185),n=a(77209),l=a(89733),c=a(80420),d=a(79055),m=a(46997),u=a(87564),p=a(5025),x=a(56935),f=a(5891),h=a(71935),g=a(92940),v=a(37505),b=a(22023),N=a(89896),j=a(97905),w=a(36141),A=a(54817),y=a(38133),C=a(36127),S=a(30690),D=a(64341),E=a(68279),I=a(92033),M=a(2183),k=a(86763),Z=a(29973),T=a(35265),U=a(44541),P=a(70402),z=a(80112),R=a(3756),V=a(97e3),O=a(54184),F=a(82477),G=a(80624),q=a(26912),B=a(16463);function _(){let[e,t]=(0,i.useState)(""),[a,_]=(0,i.useState)(null),[$,H]=(0,i.useState)(""),[L,J]=(0,i.useState)(!1),{toast:Q}=(0,k.pm)(),[W,X]=(0,i.useState)(void 0),K=(0,B.useRouter)(),[Y,ee]=(0,i.useState)(null),[et,ea]=(0,i.useState)([]),[es,ei]=(0,i.useState)({}),[eo,er]=(0,i.useState)({}),[en,el]=(0,i.useState)(0),[ec,ed]=(0,i.useState)(0),em=(0,R.c)(new Date,{representation:"date"}),eu=(0,i.useMemo)(()=>(0,I.dz)(new Date),[]),ep=(0,i.useMemo)(()=>!!((null==Y?void 0:Y.ingresosMiembros)&&Y.ingresosMiembros.length>0),[Y]),ex=(0,i.useMemo)(()=>{var e,t;if(!a)return[];let s=[];return s.push({id:a.id,nombreCompleto:"".concat(a.nombre," ").concat(a.apellido),dni:a.dni,fotoUrl:a.fotoUrl||"https://placehold.co/60x60.png",aptoMedico:a.aptoMedico||void 0,fechaNacimiento:a.fechaNacimiento,estadoSocioTitular:a.estadoSocio,relacion:"Titular",isTitular:!0,isFamiliar:!1,isAdherente:!1}),null===(e=a.grupoFamiliar)||void 0===e||e.forEach(e=>{let t="https://placehold.co/60x60.png";e.fotoPerfil&&"string"==typeof e.fotoPerfil&&(t=e.fotoPerfil),s.push({id:e.id||e.dni,nombreCompleto:"".concat(e.nombre," ").concat(e.apellido),dni:e.dni,fotoUrl:t||void 0,aptoMedico:e.aptoMedico||void 0,fechaNacimiento:e.fechaNacimiento,estadoSocioTitular:a.estadoSocio,relacion:e.relacion,isTitular:!1,isFamiliar:!0,isAdherente:!1})}),null===(t=a.adherentes)||void 0===t||t.forEach(e=>{s.push({id:e.id||e.dni,nombreCompleto:"".concat(e.nombre," ").concat(e.apellido),dni:e.dni,fotoUrl:(e.fotoPerfil&&"string"==typeof e.fotoPerfil?e.fotoPerfil:void 0)||"https://placehold.co/60x60.png",aptoMedico:e.aptoMedico||void 0,fechaNacimiento:e.fechaNacimiento,estadoSocioTitular:a.estadoSocio,relacion:"Adherente",isTitular:!1,isFamiliar:!1,isAdherente:!0,estadoAdherente:e.estadoAdherente})}),s},[a]),ef=(0,i.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=t&&a?(0,I.bG)(a.numeroSocio)||(0,I.bG)(a.dni):(0,I.bG)(e);if(!s.trim()){H("Por favor, ingrese un N\xb0 Socio, DNI o Nombre para buscar."),_(null),ee(null),ea([]),X(void 0),ei({}),er({}),el(0),ed(0);return}J(!0),t||(_(null),ee(null),ea([]),X(void 0),ei({}),er({}),el(0),ed(0));try{let e=await (0,q.g1)(s);if(e){_(e),H(""),X("socio-info");let t=0;if(!eu){var i;(0,I.Gs)(e.fechaNacimiento)&&t++,null===(i=e.grupoFamiliar)||void 0===i||i.forEach(e=>{(0,I.Gs)(e.fechaNacimiento)&&t++})}el(t),ed(15*t);let a=(await (0,q.$M)()).find(t=>t.idSocioTitular===e.numeroSocio&&t.fecha===em&&(t.estado===o.a6.ENVIADA||t.estado===o.a6.PROCESADA)),s={};a?(a.listaInvitadosDiarios.forEach(e=>{s[e.dni]=!eu&&!!e.esDeCumpleanos}),ee(a),ea(a.listaInvitadosDiarios)):(ee(null),ea([])),er(s)}else H("Persona no encontrada. Verifique los datos e intente nuevamente."),_(null)}catch(e){console.error("Error buscando socio:",e),Q({title:"Error de B\xfasqueda",description:"No se pudo completar la b\xfasqueda.",variant:"destructive"}),_(null)}finally{J(!1)}},[e,em,a,Q,eu]);(0,i.useEffect)(()=>{let e=async()=>{a&&await ef(!0)};return window.addEventListener("firestore/solicitudesInvitadosDiariosUpdated",e),window.addEventListener("sociosDBUpdated",e),()=>{window.removeEventListener("firestore/solicitudesInvitadosDiariosUpdated",e),window.removeEventListener("sociosDBUpdated",e)}},[a,ef]);let eh=(0,i.useMemo)(()=>et.reduce((e,t)=>{let a=eo[t.dni];return!0===a?e+1:!1===a?e:t.esDeCumpleanos&&t.ingresado?e+1:e},0),[et,eo]),eg=e=>{if(!a){Q({title:"Error",description:"No se encontr\xf3 el socio titular para esta acci\xf3n.",variant:"destructive"});return}let t="/carnet?titularId=".concat(a.numeroSocio);e.isTitular||(t+="&memberDni=".concat(e.dni)),K.push(t)},ev=async e=>{if(!a)return;let t=!1,s="",i="",r=(0,I.b9)(e.aptoMedico,e.fechaNacimiento);if(e.isTitular||e.isFamiliar?"Activo"===a.estadoSocio?(t=!0,s="Acceso permitido para ".concat(e.nombreCompleto," (").concat(e.relacion,")."),i="V\xe1lido"!==r.status&&"No Aplica"!==r.status?" ADVERTENCIA: Apto M\xe9dico ".concat(r.status,". ").concat(r.message):" Apto M\xe9dico: ".concat(r.status,".")):s="Acceso Denegado. Socio titular ".concat(a.nombre," ").concat(a.apellido," est\xe1 ").concat(a.estadoSocio,"."):e.isAdherente&&("Activo"===a.estadoSocio&&"Activo"===e.estadoAdherente?(t=!0,s="Acceso permitido para Adherente: ".concat(e.nombreCompleto,"."),i="V\xe1lido"!==r.status&&"No Aplica"!==r.status?" ADVERTENCIA: Apto M\xe9dico ".concat(r.status,". ").concat(r.message):" Apto M\xe9dico: ".concat(r.status,".")):"Activo"!==a.estadoSocio?s="Acceso Denegado. Socio titular ".concat(a.nombre," ").concat(a.apellido," est\xe1 ").concat(a.estadoSocio,"."):"Activo"!==e.estadoAdherente&&(s="Acceso Denegado. Adherente ".concat(e.nombreCompleto," est\xe1 ").concat(e.estadoAdherente,"."))),t){let t=[...new Set([...(null==Y?void 0:Y.ingresosMiembros)||[],e.dni])],s=Y?{...Y,ingresosMiembros:t,titularIngresadoEvento:!0,fechaUltimaModificacion:new Date}:{id:(0,I.Ox)(),idSocioTitular:a.numeroSocio,nombreSocioTitular:"".concat(a.nombre," ").concat(a.apellido),fecha:em,listaInvitadosDiarios:[],estado:o.a6.PROCESADA,fechaCreacion:new Date,fechaUltimaModificacion:new Date,titularIngresadoEvento:!0,ingresosMiembros:[e.dni]};try{let e=await (0,q.Tg)(s);ee(e)}catch(e){console.error("Error updating member entry status:",e),Q({title:"Error de Base de Datos",description:"No se pudo registrar el ingreso en la base de datos.",variant:"destructive"});return}}Q({title:t?"Ingreso Registrado":"Acceso Denegado",description:"".concat(s).concat(i),variant:t?(i.includes("ADVERTENCIA")&&"No Aplica"!==r.status&&r.status,"default"):"destructive",duration:i.includes("ADVERTENCIA")&&"No Aplica"!==r.status&&"V\xe1lido"!==r.status||!t?7e3:5e3})},eb=async e=>{var t;if(!Y)return;let a=(null===(t=Y.ingresosMiembros)||void 0===t?void 0:t.filter(t=>t!==e.dni))||[],s={...Y,ingresosMiembros:a,fechaUltimaModificacion:new Date};try{let t=await (0,q.Tg)(s);ee(t),Q({title:"Ingreso Anulado",description:"Se anul\xf3 el registro de ingreso para ".concat(e.nombreCompleto,"."),variant:"default"})}catch(e){console.error("Error updating member entry status:",e),Q({title:"Error de Base de Datos",description:"No se pudo anular el ingreso en la base de datos.",variant:"destructive"})}},eN=(e,t)=>{ei(a=>({...a,[e]:t}))},ej=(e,t)=>{if(eu&&t){Q({title:"Acci\xf3n no permitida",description:"No se pueden registrar invitados de cumplea\xf1os el ".concat((0,V.WU)(new Date,"dd/MM"),"."),variant:"default"}),er(t=>({...t,[e]:!1}));return}if(t&&et.reduce((e,t)=>{let a=eo[t.dni];return!0===a?e+1:!1===a?e:t.esDeCumpleanos&&t.ingresado?e+1:e},0)>=ec){Q({title:"Cupo Excedido",description:"Se ha alcanzado el l\xedmite de invitados de cumplea\xf1os para este grupo familiar hoy.",variant:"destructive"});return}er(a=>({...a,[e]:t})),t||ei(t=>({...t,[e]:null}))},ew=async e=>{if(!Y){Q({title:"Error",description:"No hay una lista de invitados diarios activa.",variant:"destructive"});return}let t=Y.listaInvitadosDiarios.find(t=>t.dni===e);if(!t){Q({title:"Error",description:"No se encontr\xf3 al invitado para registrar el ingreso.",variant:"destructive"});return}if(!ep){Q({title:"Acceso Denegado",description:"Un miembro responsable (titular, familiar o adherente) debe registrar su ingreso primero.",variant:"destructive"});return}let a=!!eo[e];if(!t.ingresado&&a&&et.reduce((e,t)=>{let a=eo[t.dni];return!0===a?e+1:!1===a?e:t.esDeCumpleanos&&t.ingresado?e+1:e},0)>=ec){Q({title:"Cupo Excedido",description:"Se ha alcanzado el l\xedmite de invitados de cumplea\xf1os para este grupo familiar hoy.",variant:"destructive"});return}if(!t.ingresado){let s=!1;t.fechaNacimiento&&(0,O.J)(new Date(t.fechaNacimiento))&&3>(0,F.o)(new Date,new Date(t.fechaNacimiento))&&(s=!0);let i=!a&&!s,o=es[e]||null;if(i&&!o){Q({title:"Error",description:"Por favor, seleccione un m\xe9todo de pago para ".concat(t.nombre,"."),variant:"destructive"});return}}let s=!t.ingresado,i=!1;t.fechaNacimiento&&(0,O.J)(new Date(t.fechaNacimiento))&&3>(0,F.o)(new Date,new Date(t.fechaNacimiento))&&(i=!0);let o={...t,ingresado:s,esDeCumpleanos:a,metodoPago:s?a||i?null:es[e]:t.metodoPago};try{let t={...Y,listaInvitadosDiarios:Y.listaInvitadosDiarios.map(t=>t.dni===e?o:t)};await (0,q.cG)(t),ea(t.listaInvitadosDiarios),ee(t),Q({title:"Ingreso Invitado ".concat(s?"Registrado":"Anulado"),description:"".concat(o.nombre," ").concat(o.apellido," ha sido ").concat(s?"marcado como ingresado":"desmarcado",".")}),ei(t=>({...t,[e]:null}))}catch(e){console.error("Error actualizando ingreso de invitado:",e),Q({title:"Error de Base de Datos",description:"No se pudo registrar el cambio en la base de datos.",variant:"destructive"})}},eA=(e,t,a)=>{if(a)return(0,s.jsxs)(d.C,{variant:"secondary",className:"text-xs bg-pink-500 hover:bg-pink-600 text-white",children:[(0,s.jsx)(m.Z,{className:"mr-1 h-3 w-3"})," Cumplea\xf1os"]});if(t)return(0,s.jsxs)(d.C,{variant:"secondary",className:"text-xs bg-purple-500 hover:bg-purple-600 text-white",children:[(0,s.jsx)(u.Z,{className:"mr-1 h-3 w-3"})," Gratuito (Menor)"]});if(!e)return null;let i="outline",o="",r=null;switch(e){case"Efectivo":i="default",o="bg-green-500 hover:bg-green-600 text-white",r=p.Z;break;case"Transferencia":i="default",o="bg-blue-500 hover:bg-blue-600 text-white",r=x.Z;break;case"Caja":i="default",o="bg-orange-500 hover:bg-orange-600 text-white",r=f.Z}return(0,s.jsxs)(d.C,{variant:i,className:"text-xs ".concat(o),children:[" ",r&&(0,s.jsx)(r,{className:"mr-1 h-3 w-3"})," ",e]})},ey=!1,eC="",eS="bg-red-500/10 hover:bg-red-500/20 border-red-500",eD=(0,s.jsx)(h.Z,{className:"h-8 w-8 text-red-600 mr-3"}),eE="text-red-700";a&&("Activo"===a.estadoSocio?(ey=!0,eC="Socio titular ACTIVO. Puede ingresar.",eS="bg-green-500/10 hover:bg-green-500/20 border-green-500",eD=(0,s.jsx)(g.Z,{className:"h-8 w-8 text-green-600 mr-3"}),eE="text-green-700"):eC="Socio titular ".concat(a.estadoSocio.toUpperCase(),". NO PUEDE INGRESAR."));let eI=e=>{var t;let i=null,o=null,n="border-gray-300",u=!1,p=(0,I.b9)(e.aptoMedico,e.fechaNacimiento),x=null==Y?void 0:null===(t=Y.ingresosMiembros)||void 0===t?void 0:t.includes(e.dni);e.isTitular||e.isFamiliar?(i=(0,s.jsx)(d.C,{variant:(null==a?void 0:a.estadoSocio)==="Activo"?"default":"destructive",className:(null==a?void 0:a.estadoSocio)==="Activo"?"bg-green-600 text-white":"bg-red-600 text-white",children:null==a?void 0:a.estadoSocio}),o=(0,s.jsxs)("div",{className:"p-2 rounded-md text-xs ".concat(p.colorClass.replace("text-","text-").replace("bg-","bg-opacity-10 ")," border ").concat(p.colorClass.replace("text-","border-")),children:[(0,s.jsxs)("span",{className:"font-medium",children:["Apto M\xe9dico (Obs.): $",p.status,"."]})," $",p.message,"."]}),u=(null==a?void 0:a.estadoSocio)==="Activo",n=(null==a?void 0:a.estadoSocio)==="Activo"?"border-green-400":"border-red-400",(null==a?void 0:a.estadoSocio)==="Activo"&&"V\xe1lido"!==p.status&&"No Aplica"!==p.status&&(n="border-orange-400")):e.isAdherente&&(i=(0,s.jsx)(d.C,{variant:"Activo"===e.estadoAdherente?"default":"secondary",className:"Activo"===e.estadoAdherente?"bg-green-500":"bg-slate-500",children:e.estadoAdherente}),o=(0,s.jsxs)("div",{className:"p-2 rounded-md text-xs ".concat(p.colorClass.replace("text-","text-").replace("bg-","bg-opacity-10 ")," border ").concat(p.colorClass.replace("text-","border-")),children:[(0,s.jsxs)("span",{className:"font-medium",children:["Apto M\xe9dico (Adh.): $",p.status,"."]})," $",p.message,"."]}),u=(null==a?void 0:a.estadoSocio)==="Activo"&&"Activo"===e.estadoAdherente,n=(null==a?void 0:a.estadoSocio)==="Activo"&&"Activo"===e.estadoAdherente?"border-green-300":"border-red-300",(null==a?void 0:a.estadoSocio)==="Activo"&&"Activo"===e.estadoAdherente&&"V\xe1lido"!==p.status&&"No Aplica"!==p.status&&(n="border-orange-300"));let f=e.fotoUrl||"https://placehold.co/60x60.png";return(0,s.jsxs)(r.Zb,{className:"p-4 ".concat(n," bg-card shadow-sm"),children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,s.jsxs)(c.qE,{className:"h-16 w-16 border-2 border-muted",children:[(0,s.jsx)(c.F$,{src:f,alt:e.nombreCompleto,"data-ai-hint":"member photo"}),(0,s.jsx)(c.Q5,{className:"text-xl",children:e.nombreCompleto.split(" ").map(e=>e[0]).join("").toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex-1 text-center sm:text-left",children:[(0,s.jsxs)("div",{className:"font-semibold text-lg text-foreground flex items-center",children:[e.nombreCompleto,(0,s.jsx)(d.C,{variant:"outline",className:"ml-2 align-middle",children:e.relacion}),(0,I.Gs)(e.fechaNacimiento)&&(0,s.jsxs)(d.C,{variant:"secondary",className:"ml-2 bg-pink-500 text-white",children:[(0,s.jsx)(m.Z,{className:"mr-1 h-3.5 w-3.5"})," \xa1Hoy Cumple!"]})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["DNI: ",e.dni]}),e.isTitular&&a&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["N\xb0 Socio: ",a.numeroSocio," | Estado Club: ",i]}),e.isAdherente&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Estado Adherente: ",i]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 pt-2 sm:pt-0 sm:ml-auto",children:[!e.isAdherente&&(0,s.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>eg(e),className:"w-full sm:w-auto",children:[(0,s.jsx)(v.Z,{className:"mr-2 h-4 w-4"})," Ver Carnet"]}),e.isAdherente&&(0,s.jsxs)(l.z,{variant:"ghost",size:"sm",className:"w-full sm:w-auto text-xs text-muted-foreground",children:[(0,s.jsx)(b.Z,{className:"mr-2 h-3 w-3"})," Carnet Adh. (Sim.)"]}),x?(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto",children:[(0,s.jsxs)(d.C,{variant:"default",className:"bg-green-600 hover:bg-green-700 text-white py-1.5 px-3 text-xs sm:text-sm whitespace-nowrap w-full justify-center sm:w-auto",children:[(0,s.jsx)(g.Z,{className:"mr-1.5 h-4 w-4"}),"Ingres\xf3"]}),(0,s.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>eb(e),className:"w-full sm:w-auto",children:[(0,s.jsx)(N.Z,{className:"mr-2 h-4 w-4"})," Anular Ingreso"]})]}):(0,s.jsxs)(l.z,{variant:"default",size:"sm",onClick:()=>ev(e),className:"w-full sm:w-auto",disabled:!u,children:[(0,s.jsx)(j.Z,{className:"mr-2 h-4 w-4"})," Registrar Ingreso"]})]})]}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Z,{className:"my-3"}),o]})]},e.id)};return(0,s.jsx)("div",{className:"space-y-8",children:(0,s.jsxs)(r.Zb,{className:"w-full max-w-3xl mx-auto shadow-xl",children:[(0,s.jsxs)(r.Ol,{children:[(0,s.jsxs)(r.ll,{className:"text-2xl flex items-center",children:[(0,s.jsx)(w.Z,{className:"mr-3 h-7 w-7 text-primary"})," Control de Acceso"]}),(0,s.jsx)(r.SZ,{children:"Busque cualquier socio, familiar o adherente por su DNI, Nombre, Apellido o N\xb0 de Socio (del titular)."})]}),(0,s.jsxs)(r.aY,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(n.I,{type:"text",placeholder:"Buscar por DNI, Nombre o N\xb0 Socio de cualquier miembro",value:e,onChange:e=>t(e.target.value),onKeyPress:e=>{"Enter"===e.key&&ef()},className:"flex-grow"}),(0,s.jsxs)(l.z,{onClick:()=>ef(),disabled:L,children:[(0,s.jsx)(A.Z,{className:"mr-2 h-4 w-4"})," ",L?"Buscando...":"Buscar"]})]}),$&&(0,s.jsx)("p",{className:"text-sm text-center text-muted-foreground",children:$}),L&&!a&&(0,s.jsxs)("div",{className:"pt-4 space-y-3",children:[(0,s.jsx)(M.O,{className:"h-24 w-24 rounded-full mx-auto"}),(0,s.jsx)(M.O,{className:"h-6 w-3/4 mx-auto"}),(0,s.jsx)(M.O,{className:"h-4 w-1/2 mx-auto"}),(0,s.jsx)(M.O,{className:"h-10 w-full"})]}),a&&!L&&(0,s.jsx)(T.UQ,{type:"single",collapsible:!0,className:"w-full",value:W,onValueChange:X,children:(0,s.jsxs)(T.Qd,{value:"socio-info",children:[(0,s.jsx)(T.o4,{className:"p-4 rounded-lg text-left ".concat(eS),children:(0,s.jsx)("div",{className:"flex items-center justify-between w-full",children:(0,s.jsxs)("div",{className:"flex items-center",children:[eD,(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold ".concat(eE),children:["Socio Titular: ",a.nombre," ",a.apellido," (N\xb0: ",a.numeroSocio,")",(0,I.Gs)(a.fechaNacimiento)&&(0,s.jsx)(d.C,{variant:"default",className:"ml-2 bg-pink-500 text-white",children:"\xa1Hoy Cumple!"})]}),(0,s.jsx)("div",{className:"text-sm ".concat(ey?"text-green-600":"text-red-600"),children:eC})]})]})})}),(0,s.jsxs)(T.vF,{className:"pt-0",children:[(0,s.jsxs)("div",{className:"border-t border-border px-4 py-4",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-4 text-center",children:"Verifique el estado individual y registre el ingreso de cada miembro. El ingreso general depende del estado del socio titular."}),(0,s.jsx)("div",{className:"space-y-4",children:ex.map(e=>eI(e))})]}),Y&&(0,s.jsxs)("div",{className:"border-t border-border px-4 py-4 mt-6",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold mb-3 flex items-center",children:[(0,s.jsx)(y.Z,{className:"mr-2 h-5 w-5 text-primary"}),"Invitados Diarios (Hoy: ",(0,V.WU)((0,G.D)(em),"dd/MM/yyyy"),")"]}),eu?(0,s.jsxs)("p",{className:"text-sm text-red-600 bg-red-100 p-2 rounded-md mb-3",children:[(0,s.jsx)(C.Z,{className:"inline mr-1 h-4 w-4"})," No se permiten invitados de cumplea\xf1os en esta fecha (",(0,V.WU)(new Date,"dd/MM"),")."]}):en>0?(0,s.jsxs)("p",{className:"text-sm text-pink-600 bg-pink-100 p-2 rounded-md mb-3",children:[(0,s.jsx)(m.Z,{className:"inline mr-1 h-4 w-4"})," Este grupo familiar tiene ",en," cumplea\xf1ero(s) hoy. Cupo total de invitados de cumplea\xf1os: ",ec,". Utilizado hoy: ",eh,". Disponibles: ",Math.max(0,ec-eh),"."]}):(0,s.jsxs)("p",{className:"text-sm text-blue-600 bg-blue-100 p-2 rounded-md mb-3",children:[(0,s.jsx)(S.Z,{className:"inline mr-1 h-4 w-4"})," Este grupo familiar no tiene cumplea\xf1eros hoy, por lo que no aplica el cupo especial de invitados de cumplea\xf1os."]}),!ep&&(0,s.jsxs)("p",{className:"text-sm text-orange-600 bg-orange-100 p-2 rounded-md mb-3",children:[(0,s.jsx)(D.Z,{className:"inline mr-1 h-4 w-4"})," Un miembro responsable (titular, familiar o adherente) debe registrar su ingreso primero para habilitar el registro de invitados diarios."]}),ep&&(0,s.jsxs)("p",{className:"text-sm text-green-600 bg-green-100 p-2 rounded-md mb-3",children:[(0,s.jsx)(E.Z,{className:"inline mr-1 h-4 w-4"})," Un miembro responsable ya registr\xf3 su ingreso. Puede proceder con los invitados diarios."]}),(0,s.jsxs)("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:[et.map(e=>{let t=!1;(0,O.J)(e.fechaNacimiento)&&3>(0,F.o)(new Date,e.fechaNacimiento)&&(t=!0);let a=!!eo[e.dni],i=eu||0===en||eh>=ec&&!a;return(0,s.jsx)(r.Zb,{className:"p-3 ".concat(e.ingresado?"bg-green-500/10":"bg-card"),children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"font-medium text-sm flex items-center",children:[e.nombre," ",e.apellido,t&&(0,s.jsx)(u.Z,{className:"ml-2 h-4 w-4 text-purple-500"}),(0,I.Gs)(e.fechaNacimiento)&&(0,s.jsxs)(d.C,{variant:"secondary",className:"ml-2 text-xs bg-pink-500 hover:bg-pink-600 text-white",children:[(0,s.jsx)(m.Z,{className:"mr-1 h-3 w-3"})," \xa1Hoy Cumple!"]})]}),e.ingresado&&eA(e.metodoPago,t,!eu&&e.esDeCumpleanos)]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["DNI: ",e.dni,e.fechaNacimiento&&" | Nac: ".concat((0,I.p6)(e.fechaNacimiento))]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[!e.ingresado&&ep&&!t&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 py-1 sm:border-2 sm:border-pink-500 sm:p-1",children:[(0,s.jsx)(U.X,{id:"cumple-diario-".concat(e.dni),checked:!eu&&!!eo[e.dni],onCheckedChange:t=>ej(e.dni,!!t),disabled:i}),(0,s.jsxs)(P._,{htmlFor:"cumple-diario-".concat(e.dni),className:"text-xs font-normal cursor-pointer ".concat(i?"text-muted-foreground":""),children:["Es Inv. Cumplea\xf1os ",eu?"(No disponible hoy)":""]})]}),!e.ingresado&&ep&&!t&&!eo[e.dni]&&(0,s.jsx)(z.E,{onValueChange:t=>eN(e.dni,t),defaultValue:es[e.dni]||void 0,className:"flex flex-col sm:flex-row gap-1 sm:gap-3 py-1 sm:py-0 items-start sm:items-center",children:["Efectivo","Transferencia","Caja"].map(t=>(0,s.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,s.jsx)(z.m,{value:t,id:"diario-".concat(e.dni,"-").concat(t),className:"h-3.5 w-3.5"}),(0,s.jsx)(P._,{htmlFor:"diario-".concat(e.dni,"-").concat(t),className:"text-xs font-normal cursor-pointer",children:t})]},t))})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2 self-end sm:self-center pt-2 sm:pt-0",children:(0,s.jsx)(l.z,{size:"sm",variant:e.ingresado?"outline":"default",onClick:()=>ew(e.dni),disabled:!ep||!e.ingresado&&!t&&!(!eu&&eo[e.dni])&&!es[e.dni],className:"min-w-[120px]",children:e.ingresado?"Anular Ingreso":"Registrar Ingreso"})})]})},e.dni)}),0===et.length&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No hay invitados diarios registrados para este socio hoy."})]})]})]})]})})]})]})})}},44541:function(e,t,a){"use strict";a.d(t,{X:function(){return l}});var s=a(57437),i=a(2265),o=a(69324),r=a(22468),n=a(49354);let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(o.fC,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...i,children:(0,s.jsx)(o.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(r.Z,{className:"h-4 w-4"})})})});l.displayName=o.fC.displayName},77209:function(e,t,a){"use strict";a.d(t,{I:function(){return r}});var s=a(57437),i=a(2265),o=a(49354);let r=i.forwardRef((e,t)=>{let{className:a,type:i,value:r,...n}=e;return(0,s.jsx)("input",{type:i,value:null==r?"":r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});r.displayName="Input"},70402:function(e,t,a){"use strict";a.d(t,{_:function(){return c}});var s=a(57437),i=a(2265),o=a(38364),r=a(13027),n=a(49354);let l=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(o.f,{ref:t,className:(0,n.cn)(l(),a),...i})});c.displayName=o.f.displayName},80112:function(e,t,a){"use strict";a.d(t,{E:function(){return l},m:function(){return c}});var s=a(57437),i=a(2265),o=a(99497),r=a(28165),n=a(49354);let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(o.fC,{className:(0,n.cn)("grid gap-2",a),...i,ref:t})});l.displayName=o.fC.displayName;let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(o.ck,{ref:t,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...i,children:(0,s.jsx)(o.z$,{className:"flex items-center justify-center",children:(0,s.jsx)(r.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=o.ck.displayName}},function(e){e.O(0,[4358,139,4868,317,9772,7619,4141,7623,6068,6639,2971,7023,1744],function(){return e(e.s=19387)}),_N_E=e.O()}]);