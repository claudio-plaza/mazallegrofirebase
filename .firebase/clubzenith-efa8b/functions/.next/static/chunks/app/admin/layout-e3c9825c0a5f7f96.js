(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{51610:function(e,t,i){Promise.resolve().then(i.bind(i,24923))},24923:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return v}});var a=i(57437),s=i(2265),r=i(87138),o=i(16463),n=i(1663),l=i(89733),d=i(89896),c=i(70518),u=i(66648),f=i(49354),m=i(67048),p=i(89736);function h(e){let{className:t,isExpanded:i,onToggle:s}=e,h=(0,o.usePathname)(),x=(0,o.useRouter)(),{userRole:g,logout:v}=(0,m.a)(),j=async()=>{await v(),x.push("/login"),x.refresh()},y=n.Q.filter(e=>g&&e.roles.includes(g));return(0,a.jsx)(p.pn,{delayDuration:0,children:(0,a.jsxs)("aside",{className:(0,f.cn)("flex flex-col bg-card border-r",t),children:[(0,a.jsx)("div",{className:(0,f.cn)("h-16 flex items-center border-b transition-all duration-300",i?"justify-start px-4":"justify-center px-2"),children:(0,a.jsx)(r.default,{href:"/dashboard",className:"flex items-center space-x-2",children:i?(0,a.jsx)(u.default,{src:"https://placehold.co/153x76.png",alt:"[Tu Logo]","data-ai-hint":"company logo",width:120,height:60,className:"h-auto",priority:!0}):(0,a.jsx)(u.default,{src:"https://placehold.co/40x40.png",alt:"[Tu Logo]","data-ai-hint":"club logo",width:40,height:40,className:"h-auto rounded-md",priority:!0})})}),(0,a.jsx)("nav",{className:"flex-1 px-2 py-4 space-y-1",children:y.map(e=>(0,a.jsxs)(p.u,{children:[(0,a.jsx)(p.aJ,{asChild:!0,children:(0,a.jsx)(r.default,{href:e.href,passHref:!0,children:(0,a.jsxs)(l.z,{variant:h.startsWith(e.href)?"secondary":"ghost",className:(0,f.cn)("w-full text-sm h-11",i?"justify-start":"justify-center p-0"),children:[(0,a.jsx)(e.icon,{className:(0,f.cn)("h-5 w-5",i&&"mr-3")}),(0,a.jsx)("span",{className:(0,f.cn)(!i&&"sr-only"),children:e.title})]})})}),!i&&(0,a.jsx)(p._v,{side:"right",children:(0,a.jsx)("p",{children:e.title})})]},e.id))}),(0,a.jsxs)("div",{className:"p-2 border-t mt-auto",children:[(0,a.jsxs)(p.u,{children:[(0,a.jsx)(p.aJ,{asChild:!0,children:(0,a.jsxs)(l.z,{variant:"ghost",className:(0,f.cn)("w-full text-destructive hover:text-destructive hover:bg-destructive/10",!i&&"justify-center p-0"),onClick:j,children:[(0,a.jsx)(d.Z,{className:(0,f.cn)("h-5 w-5",i&&"mr-2")}),(0,a.jsx)("span",{className:(0,f.cn)(!i&&"sr-only"),children:"Cerrar Sesi\xf3n"})]})}),!i&&(0,a.jsx)(p._v,{side:"right",children:(0,a.jsx)("p",{children:"Cerrar Sesi\xf3n"})})]}),s&&(0,a.jsxs)(l.z,{variant:"ghost",className:(0,f.cn)("w-full mt-1",!i&&"justify-center p-0"),onClick:s,children:[(0,a.jsx)(c.Z,{className:(0,f.cn)("h-5 w-5 transition-transform",!i&&"rotate-180")}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})]})]})})}var x=i(55936),g=i(60143);function v(e){let{children:t}=e,[i,o]=(0,s.useState)(!0);return(0,a.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-muted/40",children:[(0,a.jsx)(h,{isExpanded:i,onToggle:()=>o(!i),className:(0,f.cn)("hidden md:flex md:fixed md:h-full md:z-10 transition-[width] duration-300 ease-in-out",i?"md:w-64":"md:w-20")}),(0,a.jsxs)("div",{className:(0,f.cn)("flex flex-col transition-[padding-left] duration-300 ease-in-out",i?"md:pl-64":"md:pl-20"),children:[(0,a.jsxs)("header",{className:"sticky top-0 z-30 flex h-14 items-center gap-4 border-b bg-background px-4 sm:px-6 md:hidden",children:[(0,a.jsxs)(x.yo,{children:[(0,a.jsx)(x.aM,{asChild:!0,children:(0,a.jsxs)(l.z,{size:"icon",variant:"outline",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle Menu"})]})}),(0,a.jsx)(x.ue,{side:"left",className:"p-0 w-64",children:(0,a.jsx)(h,{isExpanded:!0,className:"flex h-full w-full"})})]}),(0,a.jsx)(r.default,{href:"/",className:"flex items-center",children:(0,a.jsx)(u.default,{src:"https://placehold.co/153x76.png",alt:"[Tu Logo]","data-ai-hint":"company logo",width:100,height:50,className:"h-auto",priority:!0})})]}),(0,a.jsx)("main",{className:"flex flex-1 flex-col gap-4 p-4 sm:gap-8 sm:p-6 lg:p-8",children:t})]})]})}},55936:function(e,t,i){"use strict";i.d(t,{aM:function(){return c},ue:function(){return p},yo:function(){return d}});var a=i(57437),s=i(2265),r=i(78851),o=i(13027),n=i(74697),l=i(49354);let d=r.fC,c=r.xz;r.x8;let u=r.h_,f=s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)(r.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...s,ref:t})});f.displayName=r.aV.displayName;let m=(0,o.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=s.forwardRef((e,t)=>{let{side:i="right",className:s,children:o,...d}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(r.VY,{ref:t,className:(0,l.cn)(m({side:i}),s),...d,children:[o,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=r.VY.displayName,s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",i),...s})}).displayName=r.Dx.displayName,s.forwardRef((e,t)=>{let{className:i,...s}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",i),...s})}).displayName=r.dk.displayName},89736:function(e,t,i){"use strict";i.d(t,{_v:function(){return c},aJ:function(){return d},pn:function(){return n},u:function(){return l}});var a=i(57437),s=i(2265),r=i(89412),o=i(49354);let n=r.zt,l=r.fC,d=r.xz,c=s.forwardRef((e,t)=>{let{className:i,sideOffset:s=4,...n}=e;return(0,a.jsx)(r.VY,{ref:t,sideOffset:s,className:(0,o.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...n})});c.displayName=r.VY.displayName},1663:function(e,t,i){"use strict";i.d(t,{J:function(){return m},Q:function(){return p}});var a=i(54174),s=i(11240),r=i(22023),o=i(43267),n=i(86162),l=i(82244),d=i(36141),c=i(72377),u=i(51077),f=i(56143);let m={name:"Allegro",description:"Sistema de gesti\xf3n integral para un club deportivo y social."},p=[{id:"mi-perfil-vista",title:"Mi Perfil",description:"Visualiza tus datos personales y de membres\xeda.",icon:a.Z,href:"/mi-perfil",roles:["socio"]},{id:"gestionar-familiares",title:"Gestionar Grupo Familiar",description:"Agrega o modifica los datos de tu grupo familiar.",icon:s.Z,href:"/perfil",roles:["socio"]},{id:"carnet-digital",title:"Carnet Digital",description:"Accede a tu carnet de socio digital.",icon:r.Z,href:"/carnet",roles:["socio"]},{id:"invitados-diarios",title:"Cargar Invitados del D\xeda",description:"Registra tus invitados para el acceso diario.",icon:o.Z,href:"/invitados-diarios",roles:["socio"]},{id:"mis-adherentes",title:"Mis Adherentes",description:"Gestiona tus adherentes y sus solicitudes.",icon:n.Z,href:"/mis-adherentes",roles:["socio"]},{id:"gestion-socios",title:"Gesti\xf3n de Socios",description:"Administra la base de datos de socios.",icon:s.Z,href:"/admin/gestion-socios",roles:["admin"]},{id:"panel-medico",title:"Panel M\xe9dico",description:"Gestiona revisiones m\xe9dicas y aptos f\xedsicos.",icon:l.Z,href:"/admin/panel-medico",roles:["medico","admin"]},{id:"control-acceso",title:"Control de Acceso",description:"Verifica el estado de socios para el ingreso.",icon:d.Z,href:"/admin/control-acceso",roles:["portero","admin"]},{id:"gestion-invitados-diarios-admin",title:"Listas de Invitados",description:"Revisa y descarga listas de invitados diarios.",icon:c.Z,href:"/admin/gestion-invitados-diarios",roles:["admin"]},{id:"configuracion-precios",title:"Configurar Precios",description:"Establece los precios de las entradas para invitados.",icon:u.Z,href:"/admin/configuracion-precios",roles:["admin"]},{id:"gestion-novedades",title:"Gesti\xf3n de Novedades",description:"Crea y administra novedades y alertas.",icon:f.Z,href:"/admin/gestion-novedades",roles:["admin"]}]},39630:function(e,t,i){"use strict";i.d(t,{H:function(){return u},V:function(){return c}});var a=i(57437),s=i(2265),r=i(75735),o=i(25419),n=i(26912),l=i(94282),d=i(86763);let c=(0,s.createContext)(void 0),u=e=>{let{children:t}=e,[i,u]=(0,s.useState)(null),[f,m]=(0,s.useState)(null),[p,h]=(0,s.useState)(null),[x,g]=(0,s.useState)(null),[v,j]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=()=>{};return o.I8&&(e=(0,r.Aj)(o.I8,async e=>{if(j(!0),e){u(e),console.log("Firebase Auth UID for logged-in user:",e.uid);try{let t=await (0,n.AZ)(e.uid);if(t)m(t.role),h("".concat(t.nombre," ").concat(t.apellido)),g(t.numeroSocio);else{let t=await (0,n.Xt)(e.uid);t?(m(t.role),h(t.name)):(console.warn("User with UID ".concat(e.uid," and email ").concat(e.email," is authenticated but has no profile in 'socios' or 'adminUsers' collections. Assign a role in Firestore to grant access.")),m(null),h(e.displayName||e.email)),g(null)}}catch(t){console.error("AuthContext: Failed to fetch user profile from Firestore.",t),(0,d.Am)({title:"Error de Permisos o Conexi\xf3n",description:"No se pudo cargar tu perfil. Esto puede deberse a un problema de conexi\xf3n o a que las reglas de seguridad de Firestore no permiten el acceso. Contacte al administrador.",variant:"destructive",duration:1e4}),m(null),h(e.displayName||e.email),g(null)}}else u(null),m(null),h(null),g(null);j(!1)})),()=>e()},[]);let y=async()=>{await (0,l.TX)()};return(0,a.jsx)(c.Provider,{value:{isLoggedIn:!!i,user:i,userRole:f,userName:p,loggedInUserNumeroSocio:x,isLoading:v,logout:y},children:t})}},67048:function(e,t,i){"use strict";i.d(t,{a:function(){return r}});var a=i(2265),s=i(39630);let r=()=>{let e=(0,a.useContext)(s.V);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},94282:function(e,t,i){"use strict";i.d(t,{EL:function(){return l},TX:function(){return d},pH:function(){return n}});var a=i(75735),s=i(25419),r=i(86763),o=i(26912);let n=async(e,t)=>{try{if(!s.I8)throw Error("Auth service not initialized.");return(await (0,a.e5)(s.I8,e,t)).user}catch(e){return console.error("Firebase login error:",e),(0,r.Am)({title:"Error de Inicio de Sesi\xf3n",description:"Email o contrase\xf1a incorrectos. Por favor, intente de nuevo.",variant:"destructive"}),null}},l=async e=>{try{if(!s.I8)throw Error("Auth service not initialized.");let t=(await (0,a.Xb)(s.I8,e.email,e.password)).user;await (0,a.ck)(t,{displayName:"".concat(e.nombre," ").concat(e.apellido)});let i=async(e,i)=>e instanceof FileList&&e.length>0?(0,o.cT)(e[0],"socios/".concat(t.uid,"/").concat(i)):null,[r,n,l,d]=await Promise.all([i(e.fotoPerfil,"fotoPerfil.jpg"),i(e.fotoDniFrente,"fotoDniFrente.jpg"),i(e.fotoDniDorso,"fotoDniDorso.jpg"),i(e.fotoCarnet,"fotoCarnet.jpg")]),c={email:e.email,nombre:e.nombre,apellido:e.apellido,fechaNacimiento:e.fechaNacimiento,dni:e.dni,empresa:e.empresa,telefono:e.telefono,direccion:e.direccion,fotoUrl:r,fotoPerfil:r,fotoDniFrente:n,fotoDniDorso:l,fotoCarnet:d,grupoFamiliar:[]};return await (0,o.l1)(t.uid,c,!0),t}catch(t){console.error("Firebase signup error:",t);let e="Ocurri\xf3 un error inesperado al crear la cuenta.";return"auth/email-already-in-use"===t.code&&(e="El email ingresado ya est\xe1 en uso. Por favor, utilice otro."),(0,r.Am)({title:"Error de Registro",description:e,variant:"destructive"}),null}},d=async()=>{try{if(!s.I8)throw Error("Auth service not initialized.");await (0,a.w7)(s.I8)}catch(e){console.error("Error signing out:",e),(0,r.Am)({title:"Error",description:"No se pudo cerrar la sesi\xf3n.",variant:"destructive"})}}}},function(e){e.O(0,[4358,139,4868,317,4414,8173,2978,231,2876,8175,6068,2971,7023,1744],function(){return e(e.s=51610)}),_N_E=e.O()}]);