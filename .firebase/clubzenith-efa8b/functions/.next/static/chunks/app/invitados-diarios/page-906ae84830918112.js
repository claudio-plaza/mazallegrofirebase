(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9932],{85622:function(e,a,t){Promise.resolve().then(t.bind(t,37732))},37732:function(e,a,t){"use strict";t.d(a,{GestionInvitadosDiarios:function(){return X}});var r=t(57437),s=t(2265),i=t(39343),n=t(31014),o=t(64451),l=t(89733),d=t(48185),c=t(93363),u=t(77209),m=t(86763),f=t(67048),x=t(92033),h=t(6649),v=t(60994),p=t(71995),g=t(40933),N=t(11240),j=t(87385),b=t(30690),y=t(10883),w=t(96273),D=t(80023),I=t(97e3),A=t(72781),C=t(3756),E=t(80624),R=t(54184),S=t(35062),O=t(93275),z=t(81608),M=t(87992),L=t(26912),V=t(2183),Z=t(79055),F=t(29973),U=t(29943),P=t(93191),T=t(40932),k=t(25524);let W=()=>({id:(0,x.Ox)(),nombre:"",apellido:"",dni:"",fechaNacimiento:new Date,ingresado:!1,metodoPago:null});function X(){var e,a;let[t,X]=(0,s.useState)(new Date),{toast:_}=(0,m.pm)(),{loggedInUserNumeroSocio:G,userName:q,isLoading:B}=(0,f.a)(),[H,J]=(0,s.useState)(""),[Y,K]=(0,s.useState)(""),[$,Q]=(0,s.useState)(""),ee=(0,P.NL)(),ea=(0,s.useMemo)(()=>{let e=new Date;return e.setHours(0,0,0,0),e},[]);(0,s.useEffect)(()=>{J((0,I.WU)(new Date,"yyyy-MM-dd")),K((0,I.WU)(ea,"yyyy-MM-dd")),Q((0,I.WU)((0,A.E)(ea,5),"yyyy-MM-dd"))},[ea]);let et=(0,s.useMemo)(()=>(0,C.c)(t,{representation:"date"}),[t]),{data:er,isLoading:es}=(0,T.a)({queryKey:["solicitudInvitados",G,et],queryFn:()=>(0,L.yk)(G,et),enabled:!!G&&!B}),{mutate:ei,isPending:en}=(0,k.D)({mutationFn:e=>(0,L.Tg)(e),onSuccess:(e,a)=>{ee.invalidateQueries({queryKey:["solicitudInvitados",G,et]}),_({title:a.estado===o.a6.ENVIADA?"Lista Enviada":a.id?"Lista Actualizada":"Borrador Guardado",description:"Tu lista de invitados para el ".concat((0,x.p6)(et)," ha sido actualizada.")})},onError:e=>{_({title:"Error",description:"No se pudo guardar la lista de invitados: ".concat(e.message),variant:"destructive"})}}),eo=(0,i.cI)({resolver:(0,n.F)(o.ie),defaultValues:{id:(0,x.Ox)(),idSocioTitular:G||"",nombreSocioTitular:q||"",fecha:et,listaInvitadosDiarios:[W()],estado:o.a6.BORRADOR,fechaCreacion:new Date,fechaUltimaModificacion:new Date,titularIngresadoEvento:!1}}),{fields:el,append:ed,remove:ec}=(0,i.Dq)({control:eo.control,name:"listaInvitadosDiarios"});(0,s.useEffect)(()=>{es||B||(er?eo.reset({...er,fecha:et,listaInvitadosDiarios:er.listaInvitadosDiarios.length>0?er.listaInvitadosDiarios.map(e=>({...e,id:e.id||(0,x.Ox)(),fechaNacimiento:e.fechaNacimiento})):[W()]}):eo.reset({id:(0,x.Ox)(),idSocioTitular:G||"",nombreSocioTitular:q||"",fecha:et,listaInvitadosDiarios:[W()],estado:o.a6.BORRADOR,fechaCreacion:new Date,fechaUltimaModificacion:new Date,titularIngresadoEvento:!1}))},[er,es,B,eo,et,G,q]);let eu=(0,s.useMemo)(()=>{if(!(!(0,S.R)(t,ea)||(0,O.K)(t,ea)))return!1;if(!er)return!0;let e=[o.a6.PROCESADA,o.a6.VENCIDA,o.a6.CANCELADA_ADMIN,o.a6.CANCELADA_SOCIO];return er.estado===o.a6.ENVIADA||!e.includes(er.estado)},[er,t,ea]),em=(0,s.useMemo)(()=>{if(!eu)return!1;let e=!(0,S.R)(t,ea)&&(0,S.R)(t,(0,A.E)(ea,6));return((null==er?void 0:er.estado)===o.a6.BORRADOR||!er)&&e&&((0,O.K)(t,ea)||(0,S.R)(ea,t))},[er,t,ea,eu]);return B||es&&!er?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 space-y-4",children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Cargando informaci\xf3n de invitados..."}),(0,r.jsx)(V.O,{className:"h-10 w-full max-w-xs"}),(0,r.jsx)(V.O,{className:"h-20 w-full max-w-2xl"}),(0,r.jsx)(V.O,{className:"h-64 w-full max-w-2xl"}),(0,r.jsx)(V.O,{className:"h-10 w-1/3"})]}):(0,r.jsx)(i.RV,{...eo,children:(0,r.jsxs)(d.Zb,{className:"w-full max-w-2xl mx-auto shadow-xl",children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:(0,r.jsxs)(d.ll,{className:"text-2xl flex items-center",children:[(0,r.jsx)(N.Z,{className:"mr-3 h-7 w-7 text-primary"}),"Carga de Invitados"]})}),(0,r.jsxs)(d.SZ,{children:["Crea y gestiona tu lista de invitados para el d\xeda ",(0,I.WU)(t,"dd 'de' MMMM yyyy",{locale:z.es}),". Puedes cargar la lista hasta 5 d\xedas antes. Las listas enviadas pueden ser actualizadas con m\xe1s invitados si la fecha lo permite."]})]}),(0,r.jsx)(c.l0,{...eo,children:(0,r.jsxs)("form",{onSubmit:eo.handleSubmit(e=>{if(!G){_({title:"Error",description:"Usuario no identificado.",variant:"destructive"});return}ei({...e,idSocioTitular:G,nombreSocioTitular:q||"Socio",fecha:et,id:(null==er?void 0:er.id)||e.id||(0,x.Ox)(),estado:(null==er?void 0:er.estado)||o.a6.BORRADOR,fechaCreacion:(null==er?void 0:er.fechaCreacion)||new Date,fechaUltimaModificacion:new Date,listaInvitadosDiarios:e.listaInvitadosDiarios.map(e=>({...e,id:e.id||(0,x.Ox)()}))})}),children:[(0,r.jsx)(d.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(c.lX,{htmlFor:"selected-event-date",className:"text-sm font-medium flex items-center",children:[(0,r.jsx)(j.Z,{className:"mr-2 h-4 w-4 text-muted-foreground"}),"Seleccionar Fecha para la Lista de Invitados"]}),(0,r.jsx)(u.I,{id:"selected-event-date",type:"date",value:(0,I.WU)(t,"yyyy-MM-dd"),onChange:e=>{let a=(0,E.D)(e.target.value);(0,R.J)(a)&&X(a)},min:Y,max:$,className:"w-full sm:w-[280px]",disabled:!Y||!$||(null==er?void 0:er.estado)===o.a6.ENVIADA&&!eu}),(0,r.jsx)(c.zG,{children:null===(e=eo.formState.errors.fecha)||void 0===e?void 0:e.message})]}),er&&(0,r.jsxs)(d.Zb,{className:"p-4 bg-muted/10 border-dashed",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold mb-0.5",children:"Estado de la Lista:"}),(e=>{if(!e)return null;switch(e){case o.a6.BORRADOR:return(0,r.jsxs)(Z.C,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:[(0,r.jsx)(h.Z,{className:"mr-1 h-3 w-3"})," Borrador"]});case o.a6.ENVIADA:return(0,r.jsxs)(Z.C,{className:"bg-green-500 text-white",children:[(0,r.jsx)(v.Z,{className:"mr-1 h-3 w-3"})," Enviada"]});case o.a6.PROCESADA:return(0,r.jsxs)(Z.C,{className:"bg-blue-500 text-white",children:[(0,r.jsx)(p.Z,{className:"mr-1 h-3 w-3"})," Procesada"]});case o.a6.VENCIDA:return(0,r.jsxs)(Z.C,{variant:"destructive",className:"bg-gray-500",children:[(0,r.jsx)(g.Z,{className:"mr-1 h-3 w-3"})," Vencida"]});default:return(0,r.jsx)(Z.C,{variant:"secondary",children:e})}})(er.estado)]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground text-left sm:text-right",children:[(0,r.jsxs)("p",{children:["Creada: ",(0,x.p6)(er.fechaCreacion,"dd/MM/yy HH:mm")]}),(0,r.jsxs)("p",{children:["\xdalt. Modif.: ",(0,x.p6)(er.fechaUltimaModificacion,"dd/MM/yy HH:mm")]})]})]}),(null==er?void 0:er.estado)===o.a6.ENVIADA&&eu&&(0,r.jsxs)(M.bZ,{variant:"default",className:"mt-3 bg-blue-500/10 border-blue-500/30 text-blue-700",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4"}),(0,r.jsx)(M.Cd,{children:"Lista Enviada - A\xfan Editable"}),(0,r.jsxs)(M.X,{children:["Esta lista ya fue enviada, pero a\xfan puedes agregar m\xe1s invitados para el d\xeda ",(0,x.p6)(et),". Los nuevos invitados se a\xf1adir\xe1n a la lista existente."]})]}),(null==er?void 0:er.estado)===o.a6.ENVIADA&&!eu&&(0,r.jsxs)(M.bZ,{variant:"default",className:"mt-3 bg-green-500/10 border-green-500/30 text-green-700",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4"}),(0,r.jsx)(M.Cd,{children:"Lista Enviada y Cerrada"}),(0,r.jsx)(M.X,{children:"Esta lista ya fue enviada y no puede ser modificada (probablemente porque la fecha ya pas\xf3 o est\xe1 fuera del l\xedmite de edici\xf3n)."})]})]}),(0,r.jsxs)(M.bZ,{children:[(0,r.jsx)(b.Z,{className:"h-4 w-4"}),(0,r.jsx)(M.Cd,{children:"Importante"}),(0,r.jsx)(M.X,{children:"Para que se habilite el ingreso de los invitados de esta lista, un socio responsable del grupo familiar (titular o familiar directo) debe registrar su ingreso en porter\xeda primero. Adicionalmente, los invitados deben abonar la entrada correspondiente y realizar la revisi\xf3n m\xe9dica si fuera necesario."})]}),(0,r.jsx)(F.Z,{}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium mb-1",children:["Lista de Invitados (",el.length,")"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"Nombre, Apellido, DNI y Fecha de Nacimiento son obligatorios."}),(0,r.jsx)(D.x,{className:"max-h-[500px]",children:(0,r.jsx)("div",{className:"space-y-4 pr-3",children:el.map((e,a)=>(0,r.jsxs)(d.Zb,{className:"p-4 relative bg-muted/30",children:[eu&&(0,r.jsx)(l.z,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-7 w-7 text-destructive hover:bg-destructive/10",onClick:()=>ec(a),disabled:el.length<=1&&!e.nombre&&!e.apellido&&!e.dni,children:(0,r.jsx)(y.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("p",{className:"text-sm font-semibold mb-2",children:["Invitado ",a+1]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3",children:[(0,r.jsx)(c.Wi,{control:eo.control,name:"listaInvitadosDiarios.".concat(a,".nombre"),render:e=>{let{field:a}=e;return(0,r.jsxs)(c.xJ,{children:[(0,r.jsx)(c.lX,{className:"text-xs",children:"Nombre"}),(0,r.jsx)(c.NI,{children:(0,r.jsx)(u.I,{placeholder:"Nombre",...a,className:"h-9 text-sm",disabled:!eu})}),(0,r.jsx)(c.zG,{className:"text-xs"})]})}}),(0,r.jsx)(c.Wi,{control:eo.control,name:"listaInvitadosDiarios.".concat(a,".apellido"),render:e=>{let{field:a}=e;return(0,r.jsxs)(c.xJ,{children:[(0,r.jsx)(c.lX,{className:"text-xs",children:"Apellido"}),(0,r.jsx)(c.NI,{children:(0,r.jsx)(u.I,{placeholder:"Apellido",...a,className:"h-9 text-sm",disabled:!eu})}),(0,r.jsx)(c.zG,{className:"text-xs"})]})}}),(0,r.jsx)(c.Wi,{control:eo.control,name:"listaInvitadosDiarios.".concat(a,".dni"),render:e=>{let{field:a}=e;return(0,r.jsxs)(c.xJ,{children:[(0,r.jsx)(c.lX,{className:"text-xs",children:"DNI"}),(0,r.jsx)(c.NI,{children:(0,r.jsx)(u.I,{type:"number",placeholder:"DNI (sin puntos)",...a,className:"h-9 text-sm",disabled:!eu})}),(0,r.jsx)(c.zG,{className:"text-xs"})]})}}),(0,r.jsx)(c.Wi,{control:eo.control,name:"listaInvitadosDiarios.".concat(a,".fechaNacimiento"),render:e=>{let{field:a}=e;return(0,r.jsxs)(c.xJ,{children:[(0,r.jsx)(c.lX,{className:"text-xs",children:"Fecha de Nacimiento"}),(0,r.jsx)(c.NI,{children:(0,r.jsx)(u.I,{type:"date",value:a.value?(0,I.WU)(new Date(a.value),"yyyy-MM-dd"):"",onChange:e=>a.onChange(e.target.value?(0,E.D)(e.target.value):null),max:H,min:"1900-01-01",className:"w-full h-9 text-sm",disabled:!H||!eu})}),(0,r.jsx)(c.zG,{className:"text-xs"})]})}})]})]},e.id))})}),eo.formState.errors.listaInvitadosDiarios&&!eo.formState.errors.listaInvitadosDiarios.root&&(0,r.jsx)(c.zG,{className:"text-xs mt-1",children:eo.formState.errors.listaInvitadosDiarios.message}),(null===(a=eo.formState.errors.listaInvitadosDiarios)||void 0===a?void 0:a.root)&&(0,r.jsx)(c.zG,{className:"text-xs mt-1",children:eo.formState.errors.listaInvitadosDiarios.root.message}),eu&&(0,r.jsxs)(l.z,{type:"button",variant:"outline",size:"sm",className:"mt-3",onClick:()=>ed(W()),children:[(0,r.jsx)(w.Z,{className:"mr-2 h-4 w-4"})," Agregar Invitado"]})]})]})}),(0,r.jsxs)(d.eW,{className:"pt-6 flex flex-col sm:flex-row justify-between items-center gap-3",children:[(0,r.jsx)(l.z,{type:"submit",disabled:en||!G||B||!eu,children:en?"Guardando...":(null==er?void 0:er.estado)===o.a6.ENVIADA&&eu?"Agregar M\xe1s Invitados a Lista":er?"Actualizar Borrador":"Guardar Borrador"}),em&&(0,r.jsxs)(U.aR,{children:[(0,r.jsx)(U.vW,{asChild:!0,children:(0,r.jsxs)(l.z,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[(0,r.jsx)(v.Z,{className:"mr-2 h-4 w-4"})," Confirmar y Enviar Lista"]})}),(0,r.jsxs)(U._T,{children:[(0,r.jsxs)(U.fY,{children:[(0,r.jsx)(U.f$,{children:"\xbfConfirmar y Enviar Lista de Invitados?"}),(0,r.jsxs)(U.yT,{children:["Una vez enviada, la lista para el ",(0,r.jsx)("strong",{children:(0,x.p6)(et)})," estar\xe1 confirmada. Podr\xe1s seguir agregando invitados si es necesario. Aseg\xfarate de que todos los datos sean correctos."]})]}),(0,r.jsxs)(U.xo,{children:[(0,r.jsx)(U.le,{children:"Cancelar"}),(0,r.jsx)(U.OL,{onClick:()=>{let e=eo.getValues();if(0===e.listaInvitadosDiarios.length||e.listaInvitadosDiarios.every(e=>!e.nombre&&!e.apellido&&!e.dni)){_({title:"Lista Vac\xeda",description:"Debe agregar al menos un invitado para enviar la lista.",variant:"destructive"});return}ei({...e,idSocioTitular:G,nombreSocioTitular:q,fecha:et,id:(null==er?void 0:er.id)||e.id,estado:o.a6.ENVIADA,fechaCreacion:(null==er?void 0:er.fechaCreacion)||new Date,fechaUltimaModificacion:new Date})},className:"bg-green-600 hover:bg-green-700",children:"Confirmar y Enviar"})]})]})]})]})]})})]})})}},29943:function(e,a,t){"use strict";t.d(a,{OL:function(){return p},_T:function(){return m},aR:function(){return l},f$:function(){return h},fY:function(){return f},le:function(){return g},vW:function(){return d},xo:function(){return x},yT:function(){return v}});var r=t(57437),s=t(2265),i=t(96003),n=t(49354),o=t(89733);let l=i.fC,d=i.xz,c=i.h_,u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.aV,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a})});u.displayName=i.aV.displayName;let m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(i.VY,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});m.displayName=i.VY.displayName;let f=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};f.displayName="AlertDialogHeader";let x=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};x.displayName="AlertDialogFooter";let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.Dx,{ref:a,className:(0,n.cn)("text-lg font-semibold",t),...s})});h.displayName=i.Dx.displayName;let v=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.dk,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});v.displayName=i.dk.displayName;let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.aU,{ref:a,className:(0,n.cn)((0,o.d)(),t),...s})});p.displayName=i.aU.displayName;let g=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.$j,{ref:a,className:(0,n.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",t),...s})});g.displayName=i.$j.displayName},87992:function(e,a,t){"use strict";t.d(a,{Cd:function(){return d},X:function(){return c},bZ:function(){return l}});var r=t(57437),s=t(2265),i=t(13027),n=t(49354);let o=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=s.forwardRef((e,a)=>{let{className:t,variant:s,...i}=e;return(0,r.jsx)("div",{ref:a,role:"alert",className:(0,n.cn)(o({variant:s}),t),...i})});l.displayName="Alert";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h5",{ref:a,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",t),...s})});d.displayName="AlertTitle";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",t),...s})});c.displayName="AlertDescription"},79055:function(e,a,t){"use strict";t.d(a,{C:function(){return o}});var r=t(57437);t(2265);var s=t(13027),i=t(49354);let n=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:a,variant:t,...s}=e;return(0,r.jsx)("div",{className:(0,i.cn)(n({variant:t}),a),...s})}},80023:function(e,a,t){"use strict";t.d(a,{x:function(){return o}});var r=t(57437),s=t(2265),i=t(26770),n=t(49354);let o=s.forwardRef((e,a)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(i.fC,{ref:a,className:(0,n.cn)("relative overflow-hidden",t),...o,children:[(0,r.jsx)(i.l_,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(l,{}),(0,r.jsx)(i.Ns,{})]})});o.displayName=i.fC.displayName;let l=s.forwardRef((e,a)=>{let{className:t,orientation:s="vertical",...o}=e;return(0,r.jsx)(i.gb,{ref:a,orientation:s,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...o,children:(0,r.jsx)(i.q4,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=i.gb.displayName},29973:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var r=t(57437),s=t(2265),i=t(48484),n=t(49354);let o=s.forwardRef((e,a)=>{let{className:t,orientation:s="horizontal",decorative:o=!0,...l}=e;return(0,r.jsx)(i.f,{ref:a,decorative:o,orientation:s,className:(0,n.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...l})});o.displayName=i.f.displayName},2183:function(e,a,t){"use strict";t.d(a,{O:function(){return i}});var r=t(57437),s=t(49354);function i(e){let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",a),...t})}},39630:function(e,a,t){"use strict";t.d(a,{H:function(){return u},V:function(){return c}});var r=t(57437),s=t(2265),i=t(75735),n=t(25419),o=t(26912),l=t(94282),d=t(86763);let c=(0,s.createContext)(void 0),u=e=>{let{children:a}=e,[t,u]=(0,s.useState)(null),[m,f]=(0,s.useState)(null),[x,h]=(0,s.useState)(null),[v,p]=(0,s.useState)(null),[g,N]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=()=>{};return n.I8&&(e=(0,i.Aj)(n.I8,async e=>{if(N(!0),e){u(e),console.log("Firebase Auth UID for logged-in user:",e.uid);try{let a=await (0,o.AZ)(e.uid);if(a)f(a.role),h("".concat(a.nombre," ").concat(a.apellido)),p(a.numeroSocio);else{let a=await (0,o.Xt)(e.uid);a?(f(a.role),h(a.name)):(console.warn("User with UID ".concat(e.uid," and email ").concat(e.email," is authenticated but has no profile in 'socios' or 'adminUsers' collections. Assign a role in Firestore to grant access.")),f(null),h(e.displayName||e.email)),p(null)}}catch(a){console.error("AuthContext: Failed to fetch user profile from Firestore.",a),(0,d.Am)({title:"Error de Permisos o Conexi\xf3n",description:"No se pudo cargar tu perfil. Esto puede deberse a un problema de conexi\xf3n o a que las reglas de seguridad de Firestore no permiten el acceso. Contacte al administrador.",variant:"destructive",duration:1e4}),f(null),h(e.displayName||e.email),p(null)}}else u(null),f(null),h(null),p(null);N(!1)})),()=>e()},[]);let j=async()=>{await (0,l.TX)()};return(0,r.jsx)(c.Provider,{value:{isLoggedIn:!!t,user:t,userRole:m,userName:x,loggedInUserNumeroSocio:v,isLoading:g,logout:j},children:a})}},67048:function(e,a,t){"use strict";t.d(a,{a:function(){return i}});var r=t(2265),s=t(39630);let i=()=>{let e=(0,r.useContext)(s.V);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},94282:function(e,a,t){"use strict";t.d(a,{EL:function(){return l},TX:function(){return d},pH:function(){return o}});var r=t(75735),s=t(25419),i=t(86763),n=t(26912);let o=async(e,a)=>{try{if(!s.I8)throw Error("Auth service not initialized.");return(await (0,r.e5)(s.I8,e,a)).user}catch(e){return console.error("Firebase login error:",e),(0,i.Am)({title:"Error de Inicio de Sesi\xf3n",description:"Email o contrase\xf1a incorrectos. Por favor, intente de nuevo.",variant:"destructive"}),null}},l=async e=>{try{if(!s.I8)throw Error("Auth service not initialized.");let a=(await (0,r.Xb)(s.I8,e.email,e.password)).user;await (0,r.ck)(a,{displayName:"".concat(e.nombre," ").concat(e.apellido)});let t=async(e,t)=>e instanceof FileList&&e.length>0?(0,n.cT)(e[0],"socios/".concat(a.uid,"/").concat(t)):null,[i,o,l,d]=await Promise.all([t(e.fotoPerfil,"fotoPerfil.jpg"),t(e.fotoDniFrente,"fotoDniFrente.jpg"),t(e.fotoDniDorso,"fotoDniDorso.jpg"),t(e.fotoCarnet,"fotoCarnet.jpg")]),c={email:e.email,nombre:e.nombre,apellido:e.apellido,fechaNacimiento:e.fechaNacimiento,dni:e.dni,empresa:e.empresa,telefono:e.telefono,direccion:e.direccion,fotoUrl:i,fotoPerfil:i,fotoDniFrente:o,fotoDniDorso:l,fotoCarnet:d,grupoFamiliar:[]};return await (0,n.l1)(a.uid,c,!0),a}catch(a){console.error("Firebase signup error:",a);let e="Ocurri\xf3 un error inesperado al crear la cuenta.";return"auth/email-already-in-use"===a.code&&(e="El email ingresado ya est\xe1 en uso. Por favor, utilice otro."),(0,i.Am)({title:"Error de Registro",description:e,variant:"destructive"}),null}},d=async()=>{try{if(!s.I8)throw Error("Auth service not initialized.");await (0,r.w7)(s.I8)}catch(e){console.error("Error signing out:",e),(0,i.Am)({title:"Error",description:"No se pudo cerrar la sesi\xf3n.",variant:"destructive"})}}}},function(e){e.O(0,[4358,139,4868,317,9772,3906,4414,8384,932,73,227,739,6068,7108,2971,7023,1744],function(){return e(e.s=85622)}),_N_E=e.O()}]);